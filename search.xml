<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Ollamaï¼šé›¶ä»£ç éƒ¨ç½²å¤§æ¨¡å‹ï¼Œè½»æ¾ç©è½¬AI</title>
      <link href="//2025/02/22/ollama-local-model-deploy/"/>
      <url>//2025/02/22/ollama-local-model-deploy/</url>
      
        <content type="html"><![CDATA[<h2 id="Ollamaï¼šé›¶ä»£ç éƒ¨ç½²å¤§æ¨¡å‹ï¼Œè½»æ¾ç©è½¬AI"><a href="#Ollamaï¼šé›¶ä»£ç éƒ¨ç½²å¤§æ¨¡å‹ï¼Œè½»æ¾ç©è½¬AI" class="headerlink" title="Ollamaï¼šé›¶ä»£ç éƒ¨ç½²å¤§æ¨¡å‹ï¼Œè½»æ¾ç©è½¬AI"></a>Ollamaï¼šé›¶ä»£ç éƒ¨ç½²å¤§æ¨¡å‹ï¼Œè½»æ¾ç©è½¬AI</h2><h3 id="ä¸€ã€Ollamaä¸‹è½½å’Œå®‰è£…"><a href="#ä¸€ã€Ollamaä¸‹è½½å’Œå®‰è£…" class="headerlink" title="ä¸€ã€Ollamaä¸‹è½½å’Œå®‰è£…"></a>ä¸€ã€Ollamaä¸‹è½½å’Œå®‰è£…</h3><h4 id="1-ollamaå®˜ç½‘åœ°å€Ollama"><a href="#1-ollamaå®˜ç½‘åœ°å€Ollama" class="headerlink" title="1. ollamaå®˜ç½‘åœ°å€Ollama"></a>1. ollamaå®˜ç½‘åœ°å€<a href="https://ollama.com/">Ollama</a></h4><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222143712754.png" alt="image-20250222143712704"></p><h4 id="2-ollamaä¸‹è½½"><a href="#2-ollamaä¸‹è½½" class="headerlink" title="2.ollamaä¸‹è½½"></a>2.ollamaä¸‹è½½</h4><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222143740926.png" alt="image-20250222143740877"></p><p>æ ¹æ®è‡ªå·±éœ€è¦éƒ¨ç½²çš„æ“ä½œç³»ç»Ÿé€‰æ‹©</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222143819026.png" alt="image-20250222143818974"></p><h4 id="3-Linuxæ“ä½œç³»ç»Ÿå®‰è£…ï¼ˆæ­¤å¤„ä»¥Rocky-Linux-v9-5ä¸ºä¾‹ï¼‰"><a href="#3-Linuxæ“ä½œç³»ç»Ÿå®‰è£…ï¼ˆæ­¤å¤„ä»¥Rocky-Linux-v9-5ä¸ºä¾‹ï¼‰" class="headerlink" title="3.Linuxæ“ä½œç³»ç»Ÿå®‰è£…ï¼ˆæ­¤å¤„ä»¥Rocky Linux v9.5ä¸ºä¾‹ï¼‰"></a>3.Linuxæ“ä½œç³»ç»Ÿå®‰è£…ï¼ˆæ­¤å¤„ä»¥Rocky Linux v9.5ä¸ºä¾‹ï¼‰</h4><ul><li><p>ä¸‹è½½ollama</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222144026426.png" alt="image-20250222144026375"></p></li><li><p>æ‰§è¡Œå¤åˆ¶å‘½ä»¤ï¼Œç­‰å¾…ä¸‹è½½å’Œå®‰è£…ç»“æŸ</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">curl -fsSL https://ollama.com/install.sh | sh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222144100052.png" alt="image-20250222144100032"></p><blockquote><p>å®‰è£…ç»“æŸåä¼šå‡ºç°å¦‚ä¸‹å†…å®¹ï¼Œè¯´æ˜å·²ç»å®‰è£…å®Œæˆ</p><p>âš ï¸âš ï¸âš ï¸ç”±äºæœ¬çŒ¿ä½¿ç”¨çš„linuxæœåŠ¡å™¨æ²¡æœ‰å®‰è£…æ˜¾å¡ï¼ˆGPUï¼‰ï¼Œæ‰€ä»¥ä¼šå‡ºç°å¦‚ä¸‹çš„è­¦å‘Š</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222160650109.png" alt="image-20250222160650087"></p></li><li><p>æ ¡éªŒæ˜¯å¦å®‰è£…æˆåŠŸ</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æ‰“å¼€cmdå‘½ä»¤è¡Œç•Œé¢ï¼Œå¿«æ·é”® Win+Rollama -v<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>æ‰§è¡Œåä¼šçœ‹åˆ°å¦‚ä¸‹çš„ç»“æœ</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222160905789.png" alt="image-20250222160905771"></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># è¾“å…¥å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦æ­£å¸¸è¿è¡Œsudo systemctl status ollama<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>å‡ºç°å¦‚ä¸‹ç»“æœåˆ™è¯´æ˜æ­£å¸¸è¿è¡Œ</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222161017860.png" alt="image-20250222161017832"></p></li><li><p>ä¿®æ”¹æ¨¡å‹ä¿å­˜è·¯å¾„ï¼ˆæ ¹æ®è‡ªå·±çš„ç›®å½•ç©ºé—´å¤§å°å†³å®šï¼Œå¦‚æœç©ºé—´è¶³å¤Ÿå……è¶³å¯ä»¥ä¸è¿›è¡Œè°ƒæ•´ï¼‰</p><ul><li><p>ç¼–è¾‘ollama.serviceæ–‡ä»¶</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># ç¼–è¾‘/etc/systemd/system/ollama.serviceæ–‡ä»¶sudo vim /etc/systemd/system/ollama.service<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>åœ¨[Service]æ ‡è®°ä¸‹ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ˆå¦‚æœå®åœ¨ä¸ç†è§£ä»€ä¹ˆæ¶µä¹‰ï¼Œç›´æ¥æ·»åŠ ä¸‹é¢å†…å®¹å°±å¯ä»¥ï¼‰</p><blockquote><p>æ¨¡å‹å˜æ›´æ–‡ä»¶å¤¹åˆ›å»º</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æ‰§è¡Œå‘½ä»¤åˆ›å»ºè‡ªå®šä¹‰æ¨¡å‹ä¿å­˜ç›®å½•sudo mkdir -p /opt/ollama/models<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>æ ¹æ®éœ€æ±‚æ·»åŠ æ¨¡å‹æ–‡ä»¶ä¿å­˜è·¯å¾„é…ç½®</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># ä¿®æ”¹Ollamaçš„hoståœ°å€ï¼Œé»˜è®¤æ˜¯127.0.0.1ï¼Œåªèƒ½æœ¬åœ°è®¿é—®ï¼Œæ— æ³•åœ¨å…¶ä»–åŒç½‘ç»œç”µè„‘ä¸Šè®¿é—®Environment="OLLAMA_HOST=0.0.0.0"# è·¨åŸŸå¤„ç†Environment="OLLAMA_ORIGINS=*"# æ¨¡å‹ä¿å­˜ç›®å½•æ›´æ¢,æ­¤å¤„/opt/ollama/modelsæ–‡ä»¶å¤¹æ ¹æ®è‡ªå·±éœ€æ±‚å˜åŒ–åˆ›å»ºï¼Œå¦‚æœä¸éœ€è¦å˜æ›´æ¨¡å‹ä¿å­˜æ–‡ä»¶å¤¹ï¼Œåˆ™ä¸éœ€è¦é…ç½®Environment="OLLAMA_MODELS=/opt/ollama/models"<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222162331061.png" alt="image-20250222162331030"></p></li><li><p>ä¿å­˜è¯¥æ–‡ä»¶å†…å®¹</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æŒ‰ä¸‹Escé”®# åŒæ—¶æŒ‰ä¸‹`Shift`å’Œ`:`# è¾“å…¥wqå›è½¦wq<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222162624227.png" alt="image-20250222162624206"></p></li><li><p>é‡æ–°åŠ è½½åˆ·æ–°é…ç½®</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># åˆ·æ–°é…ç½®sudo systemctl daemon-reload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>é‡å¯ollama</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># é‡å¯ollamasudo systemctl restart ollama<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>å¦‚æœéœ€è¦æ¯æ¬¡ç³»ç»Ÿé‡å¯ï¼Œollamaéšæœºå¯åŠ¨è¿è¡Œï¼Œåœ¨æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># é…ç½®OllamaæœåŠ¡éšæœºå¯åŠ¨sudo systemctl enable ollama<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>æ ¡éªŒæ˜¯å¦é‡å¯æˆåŠŸ</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">sudo systemctl status ollama<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>å¦‚æœå‡ºç°å¦‚ä¸‹æƒ…å†µï¼Œåˆ™è¯´æ˜å¤±è´¥</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222163625913.png" alt="image-20250222163625890"></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼Œæ£€æŸ¥æœåŠ¡å¯åŠ¨å¤±è´¥åŸå› sudo journalctl -u ollama<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>æˆ‘ä»¬ä¼šå‘ç°æ­¤å¤„æç¤ºæŠ¥é”™åŸå› æ˜¯æ²¡æœ‰æƒé™åœ¨ä¹‹å‰åˆ›å»ºçš„æ¨¡å‹çš„ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶å¤¹</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222163611834.png" alt="image-20250222163611783"></p><blockquote><p>ç»™åˆ›å»ºçš„æ¨¡å‹æ–‡ä»¶å¤¹æˆæƒ</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># å°†ç›®æ ‡è·¯å¾„çš„æ‰€å±ç”¨æˆ·å’Œç»„æ”¹ä¸ºrootç”¨æˆ·sudo chown -R root:root /opt/ollama/models# å°†æ–‡ä»¶å¤¹æƒé™æ›´æ¢ä¸º777sudo chmod -R 777 /opt/ollama/models# å†æ¬¡æ‰§è¡Œå¦‚ä¸‹é‡å¯å‘½ä»¤sudo systemctl restart ollama# æŸ¥çœ‹å¯åŠ¨çŠ¶æ€sudo systemctl status ollama<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å¦‚æœå‡ºç°å¦‚ä¸‹æƒ…å†µï¼Œåˆ™è¯´æ˜å¯åŠ¨æˆåŠŸ</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222164259042.png" alt="image-20250222164259004"></p></li></ul></li><li><p>æ£€éªŒæ¨¡å‹ç›®å½•æ˜¯å¦åˆ‡æ¢æˆåŠŸ</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ˜¯å¦ç”Ÿæˆblobsæ–‡ä»¶å¤¹sudo ll /opt/ollama/models<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222165254397.png" alt="image-20250222165254372"></p></li><li><p>åŒå±€åŸŸç½‘è®¿é—®ï¼Œæ£€éªŒæ˜¯å¦å¯ä»¥ï¼Œåœ¨å¦ä¸€å°ç”µè„‘æµè§ˆå™¨ä¸­è®¿é—®<a href="http://192.168.1.72:11434/%EF%BC%8C%E5%9C%B0%E5%9D%80%E6%A0%B9%E6%8D%AE%E8%87%AA%E5%B7%B1%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%9C%B0%E5%9D%80%E6%9B%B4%E6%8D%A2">http://192.168.1.72:11434/ï¼Œåœ°å€æ ¹æ®è‡ªå·±æœåŠ¡å™¨åœ°å€æ›´æ¢</a></p><blockquote><p>å¦‚æœå‡ºç°å¦‚ä¸‹ç•Œé¢ï¼Œåˆ™è¯´æ˜å¯ä»¥è®¿é—®æˆåŠŸ</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222165752926.png" alt="image-20250222165752890"></p><blockquote><p>å¦‚æœè¿˜æ˜¯ä¸å¯ä»¥ï¼Œè¯·æ£€æŸ¥æ˜¯å¦æœåŠ¡å™¨é˜²ç«å¢™æ²¡æœ‰å¼€æ”¾è¯¥ç«¯å£</p><p>æœ¬çŒ¿ä½¿ç”¨çš„æœåŠ¡å™¨æ“ä½œç³»ç»Ÿ(Rocky Linux v9.5)ç«¯å£å¼€æ”¾æ–¹æ³•å¦‚ä¸‹ï¼š</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># å¼€æ”¾ç«¯å£sudo firewall-cmd --zone=public --permanent --add-port=11434/tcp# åˆ·æ–°ç³»ç»Ÿé…ç½®ï¼Œä½¿å…¶ç”Ÿæ•ˆsudo firewall-cmd --reload<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li></li></ul><h4 id="4-Windowsæ“ä½œç³»ç»Ÿå®‰è£…"><a href="#4-Windowsæ“ä½œç³»ç»Ÿå®‰è£…" class="headerlink" title="4.Windowsæ“ä½œç³»ç»Ÿå®‰è£…"></a>4.Windowsæ“ä½œç³»ç»Ÿå®‰è£…</h4><ul><li><p>ä¸‹è½½ollama</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222152149631.png" alt="image-20250222152149571"></p></li><li><p>åŒå‡»OllamaSetup.exeæ–‡ä»¶å®‰è£…ï¼Œä¼šå‡ºç°å¦‚ä¸‹ç•Œé¢</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222152252222.png" alt="image-20250222152252194"></p></li><li><p>ç‚¹å‡»Installè¿›è¡Œå®‰è£…</p><blockquote><p>ğŸ—ï¸ğŸ—ï¸ğŸ—ï¸è¯´æ˜:</p><p>æ­¤å¤„æ— æ³•é€‰æ‹©å®‰è£…ç›®å½•ï¼Œé»˜è®¤å®‰è£…è·¯å¾„ä¸º C:\Users\<code>ç”¨æˆ·å</code>\AppData\Local\Programs</p><p>æ­¤å¤„<code>ç”¨æˆ·å</code>æ ¹æ®ç”¨æˆ·å…·ä½“çš„è®¡ç®—æœºåç§°è°ƒæ•´</p></blockquote></li><li><p>æ ¡éªŒæ˜¯å¦å®‰è£…æˆåŠŸ</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æ‰“å¼€cmdå‘½ä»¤è¡Œç•Œé¢ï¼Œå¿«æ·é”® Win+R</span>ollama -v<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>çœ‹åˆ°å¦‚ä¸‹ç»“æœè¯´æ˜ollamaå·²ç»å®‰è£…æˆåŠŸ</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222153122026.png" alt="image-20250222153122003"></p><blockquote><p>æˆ–è€…æŸ¥çœ‹ä»»åŠ¡æ ä¸­æ˜¯å¦å­˜åœ¨å¦‚ä¸‹å›¾æ ‡ï¼Œå¦‚æœå­˜åœ¨è¯´æ˜å®‰è£…æˆåŠŸ</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222153315547.png" alt="image-20250222153315526"></p><blockquote><p>ä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥å¦‚ä¸‹åœ°å€<a href="http://127.0.0.1:11434/%E8%AE%BF%E9%97%AE%EF%BC%8C%E5%87%BA%E7%8E%B0%E5%A6%82%E4%B8%8B%E5%86%85%E5%AE%B9%E8%AF%B4%E6%98%8E%E5%AE%89%E8%A3%85%E6%88%90%E5%8A%9F">http://127.0.0.1:11434/è®¿é—®ï¼Œå‡ºç°å¦‚ä¸‹å†…å®¹è¯´æ˜å®‰è£…æˆåŠŸ</a></p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222153736131.png" alt="image-20250222153736110"></p></li><li><p>ä¿®æ”¹æ¨¡å‹ä¿å­˜è·¯å¾„ï¼ˆæ ¹æ®è‡ªå·±çš„ç›®å½•ç©ºé—´å¤§å°å†³å®šï¼Œå¦‚æœç©ºé—´è¶³å¤Ÿå……è¶³å¯ä»¥ä¸è¿›è¡Œè°ƒæ•´ï¼‰</p><ul><li>è¿›å…¥ç³»ç»Ÿè®¾ç½®ç•Œé¢ï¼Œæ»šåŠ¨é¡µé¢ç¿»åˆ°æœ€ä¸‹æ–¹ï¼Œé€‰æ‹©ç³»ç»Ÿä¿¡æ¯</li></ul><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222153931637.png" alt="image-20250222153931597"></p><ul><li><p>é€‰æ‹©é«˜çº§ç³»ç»Ÿè®¾ç½®</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222154116824.png" alt="image-20250222154116797"></p></li><li><p>ç‚¹å‡»ç¯å¢ƒå˜é‡</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222154140643.png" alt="image-20250222154140618"></p></li><li><p>æ–°å»ºç”¨æˆ·ç¯å¢ƒå˜é‡</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222155324484.png" alt="image-20250222155324451"></p></li><li><p>æ·»åŠ ç¯å¢ƒå˜é‡ä¿¡æ¯ï¼Œç„¶åä¸€è·¯ç¡®å®šä¸‹å»å°±å¯ä»¥äº†</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222155446088.png" alt="image-20250222155446065"></p><blockquote><p>ğŸ—ï¸ğŸ—ï¸ğŸ—ï¸è¯´æ˜ï¼š</p><ul><li>æ¨¡å‹è·¯å¾„ä¿®æ”¹ï¼Œé…ç½®å†…å®¹å¦‚ä¸‹ï¼š<ul><li>å˜é‡åï¼šOLLAMA_MODELS</li><li>å˜é‡å€¼ï¼šH:\ollama\modelsï¼ˆæ ¹æ®è‡ªå·±çš„ç›®å½•æ›´æ¢ï¼Œæ­¤å¤„æ˜¯æœ¬çŒ¿ä½¿ç”¨çš„è·¯å¾„ï¼‰</li></ul></li><li>å¦‚æœè¿˜éœ€è¦ç»™å±€åŸŸç½‘å…¶ä»–ç”µè„‘ä½¿ç”¨ï¼Œéœ€è¦æ·»åŠ å¦‚ä¸‹ä¸¤ä¸ªé…ç½®<ul><li>æ·»åŠ OLLAMA_HOST<ul><li>å˜é‡åï¼šOLLAMA_HOST</li><li>å˜é‡å€¼ï¼š0.0.0.0</li></ul></li><li>æ·»åŠ OLLAMA_ORIGINS<ul><li>å˜é‡åï¼šOLLAMA_ORIGINS</li><li>å˜é‡å€¼ï¼š*</li></ul></li></ul></li></ul></blockquote></li><li><p>é‡å¯ollamaå·¥å…·ï¼Œåœ¨ä»»åŠ¡ä¸­æ‰¾åˆ°ollamaå›¾æ ‡ï¼Œç„¶åå³å‡»é¼ æ ‡å³é”®ï¼Œç‚¹å‡»Quit Ollama</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222155936776.png" alt="image-20250222155936754"></p></li><li><p>æ£€æŸ¥æ¨¡å‹ä¿å­˜æ–‡ä»¶ç›®å½•æ˜¯å¦å˜æ›´</p><blockquote><p>ollamaåŸé»˜è®¤æ¨¡å‹ä¿å­˜è·¯å¾„C:\Users\ç”¨æˆ·å\.ollama\models</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222160505397.png" alt="image-20250222160505367"></p><blockquote><p>ä¿®æ”¹åä¼šå‘ç°ï¼Œåœ¨æ›´æ¢çš„ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªblobsæ–‡ä»¶å¤¹ï¼Œè¯´æ˜å·²ç»æ›´æ¢æˆåŠŸ</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222160253810.png" alt="image-20250222160253785"></p></li></ul></li><li><p>5.æ¨¡å‹ä¸‹è½½</p><blockquote><p>ä¸‹è½½æ¨¡å‹ï¼Œæ­¤å¤„ä»¥deepseek r1 7Bä¸ºä¾‹</p></blockquote><ul><li><p>é¦–å…ˆåˆ°ollamaå®˜æ–¹æŸ¥æ‰¾æ¨¡å‹</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222170301868.png" alt="image-20250222170301802"></p></li><li><p>æ­¤å¤„æˆ‘ä»¬é€‰æ‹©deepseek-r1</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222170823047.png" alt="image-20250222170822986"></p></li><li><p>å®˜æ–¹æä¾›çš„å‘½ä»¤æ˜¯ç›´æ¥ä¸‹è½½å¹¶è¿è¡Œæ¨¡å‹</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ollama run deepseek-r1:7b<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>ä¸‹è½½æ¨¡å‹çŠ¶æ€å¦‚ä¸‹</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222171012539.png" alt="image-20250222171012512"></p><blockquote><p>ä¸‹è½½å®Œæˆè‡ªåŠ¨è¿è¡Œæ¨¡å‹</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222171800550.png" alt="image-20250222171800521"></p><blockquote><p>è¿›è¡Œæé—®</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222171913518.png" alt="image-20250222171913484"></p></li><li><p>å¦‚æœæƒ³ä¸ç›´æ¥è¿è¡Œä»…æ‹‰å–ä¸‹è½½æ¨¡å‹ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">ollama pull deepseek-r1:7b<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li></ul><h4 id="5-ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢è®¿é—®éƒ¨ç½²å¥½çš„æ¨¡å‹ï¼Œæ­¤å¤„ä½¿ç”¨AnythingLLM"><a href="#5-ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢è®¿é—®éƒ¨ç½²å¥½çš„æ¨¡å‹ï¼Œæ­¤å¤„ä½¿ç”¨AnythingLLM" class="headerlink" title="5.ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢è®¿é—®éƒ¨ç½²å¥½çš„æ¨¡å‹ï¼Œæ­¤å¤„ä½¿ç”¨AnythingLLM"></a>5.ä½¿ç”¨å›¾å½¢åŒ–ç•Œé¢è®¿é—®éƒ¨ç½²å¥½çš„æ¨¡å‹ï¼Œæ­¤å¤„ä½¿ç”¨AnythingLLM</h4><ul><li>ä¸‹è½½AnythingLLMï¼Œ<a href="https://anythingllm.com/">https://anythingllm.com/</a></li></ul><p>  <img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222172320975.png" alt="image-20250222172320903"></p><blockquote><p>æ ¹æ®è‡ªå·±çš„ç”µè„‘ç³»ç»Ÿé€‰æ‹©é€‚åˆçš„å®‰è£…åŒ…</p></blockquote><p>  <img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222173034058.png" alt="image-20250222173033987"></p><ul><li><p>åŒå‡»AnythingLLMDesktop.exeè¿›è¡Œå®‰è£…ï¼Œæ ¹æ®è‡ªå·±å–œå¥½é€‰æ‹©å®‰è£…ç›®å½•</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222172530521.png" alt="image-20250222172530489"></p></li><li><p>é…ç½®AnyThingLLM</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222173219282.png" alt="image-20250222173219237"></p></li><li><p>åˆ›å»ºå·¥ä½œåŒº</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222173313237.png" alt="image-20250222173313191"></p></li><li><p>é…ç½®æ¨¡å‹è¿æ¥æ–¹å¼ä»¥åŠé»˜è®¤ä½¿ç”¨ä»€ä¹ˆæ¨¡å‹</p><blockquote><p>é€‰æ‹©èŠå¤©è®¾ç½®</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222173519243.png" alt="image-20250222173519198"></p><blockquote><p>é€‰æ‹©å·¥ä½œåŒºLLMæä¾›è€…</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222173554357.png" alt="image-20250222173554301"></p><blockquote><p>é€‰æ‹©æä¾›å•†</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222173622452.png" alt="image-20250222173622400"></p><blockquote><p>åœ¨åˆ—è¡¨ä¸­é€‰æ‹©Ollama</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222173700498.png" alt="image-20250222173700443"></p><blockquote><p>é…ç½®OllamaæœåŠ¡è¿æ¥åœ°å€</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222173756310.png" alt="image-20250222173756261"></p><blockquote><p>æ­¤å¤„åœ°å€æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©</p><ul><li>å¦‚æœæ˜¯æœ¬åœ°æœåŠ¡ï¼ˆAnythingLLMå·¥å…·å’ŒOllamaåœ¨åŒä¸€å°ç”µè„‘ä¸Šï¼‰ï¼Œå¡«å…¥<a href="http://127.0.0.1:11434/">http://127.0.0.1:11434</a></li><li>å¦‚æœæ˜¯éæœ¬åœ°æœåŠ¡ï¼ˆAnythingLLMå·¥å…·å’ŒOllamaä¸åœ¨åŒä¸€å°ç”µè„‘ä¸Šï¼‰ï¼Œå¡«å…¥http://æœåŠ¡å™¨IP:11434</li></ul><p>æ­¤å¤„æœ¬çŒ¿ä»¥æœåŠ¡å™¨éƒ¨ç½²çš„åœ°å€æ¥é…ç½®</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222174143980.png" alt="image-20250222174143936"></p><blockquote><p>é…ç½®é¡µç¿»åˆ°æœ€ä¸‹æ–¹ï¼Œæ›´æ–°å·¥ä½œåŒºé…ç½®</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222174253049.png" alt="image-20250222174253002"></p></li><li><p>å›åˆ°å·¥ä½œåŒºç•Œé¢</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222174409046.png" alt="image-20250222174408999"></p></li><li><p>è¾“å…¥èŠå¤©å†…å®¹è¿›è¡ŒèŠå¤©</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222174503643.png" alt="image-20250222174503598"></p></li><li><p>ç»“æœåé¦ˆ</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222174601409.png" alt="image-20250222174601334"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> AI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è¿˜åœ¨è‡ªå·±è¾›è‹¦ç¼–å†™åˆ†å¸ƒå¼ ID ç”Ÿæˆå·¥å…·ï¼Ÿè¿™æ¬¾ç¥å™¨è®©ä½ ç¬é—´ â€œçœŸé¦™â€ï¼</title>
      <link href="//2025/02/17/flake-id-generate-with-hazelcast-for-local-or-server/"/>
      <url>//2025/02/17/flake-id-generate-with-hazelcast-for-local-or-server/</url>
      
        <content type="html"><![CDATA[<h2 id="è¿˜åœ¨è‡ªå·±è¾›è‹¦ç¼–å†™åˆ†å¸ƒå¼-ID-ç”Ÿæˆå·¥å…·ï¼Ÿè¿™æ¬¾ç¥å™¨è®©ä½ ç¬é—´-â€œçœŸé¦™â€"><a href="#è¿˜åœ¨è‡ªå·±è¾›è‹¦ç¼–å†™åˆ†å¸ƒå¼-ID-ç”Ÿæˆå·¥å…·ï¼Ÿè¿™æ¬¾ç¥å™¨è®©ä½ ç¬é—´-â€œçœŸé¦™â€" class="headerlink" title="è¿˜åœ¨è‡ªå·±è¾›è‹¦ç¼–å†™åˆ†å¸ƒå¼ ID ç”Ÿæˆå·¥å…·ï¼Ÿè¿™æ¬¾ç¥å™¨è®©ä½ ç¬é—´ â€œçœŸé¦™â€"></a>è¿˜åœ¨è‡ªå·±è¾›è‹¦ç¼–å†™åˆ†å¸ƒå¼ ID ç”Ÿæˆå·¥å…·ï¼Ÿè¿™æ¬¾ç¥å™¨è®©ä½ ç¬é—´ â€œçœŸé¦™â€</h2><blockquote><p>åœ¨æ—¥å¸¸å¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è‡ªè¡Œå®ç°åˆ†å¸ƒå¼IDç”Ÿæˆï¼Œä½†è¿™ç§æ–¹å¼å¾€å¾€ä¼´éšç€è¯¸å¤šé—®é¢˜ï¼Œå¦‚æ€§èƒ½ç“¶é¢ˆã€é‡å¤IDé£é™©ç­‰ã€‚ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥å¼•å…¥<code> Hazelcast</code>ï¼Œå®ƒæä¾›äº†é«˜æ•ˆã€å¯é çš„åˆ†å¸ƒå¼IDç”Ÿæˆæœºåˆ¶ï¼Œå¸®åŠ©æˆ‘ä»¬é¿å…å¸¸è§çš„é™·é˜±ï¼Œç®€åŒ–å¼€å‘æµç¨‹ï¼Œæå‡ç³»ç»Ÿç¨³å®šæ€§ã€‚</p></blockquote><h4 id="ä¸€ã€åŸºç¡€ä¾èµ–å¼•å…¥"><a href="#ä¸€ã€åŸºç¡€ä¾èµ–å¼•å…¥" class="headerlink" title="ä¸€ã€åŸºç¡€ä¾èµ–å¼•å…¥"></a>ä¸€ã€åŸºç¡€ä¾èµ–å¼•å…¥</h4><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.hazelcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hazelcast<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>       <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>5.5.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="äºŒã€æœ¬åœ°é›†æˆç‰ˆæœ¬"><a href="#äºŒã€æœ¬åœ°é›†æˆç‰ˆæœ¬" class="headerlink" title="äºŒã€æœ¬åœ°é›†æˆç‰ˆæœ¬"></a>äºŒã€æœ¬åœ°é›†æˆç‰ˆæœ¬</h4><ul><li><p>æ·»åŠ Sprringbooté…ç½®ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">HazelcastClient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>client<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">ClientConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>client<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">ClientFlakeIdGeneratorConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">HazelcastInstance</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MINUTES<span class="token punctuation">;</span><span class="token comment">/** * Hazelcasté…ç½®ç±» * åˆ›å»ºflakeIdç”Ÿæˆå™¨é…ç½® * é¢„å–æ•°é‡ä¸º10ï¼Œé¢„å–æœ‰æ•ˆæœŸ10åˆ†é’Ÿ */</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HazelcastConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">HazelcastInstance</span> <span class="token function">hazelcastInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºé…ç½®</span>        <span class="token class-name">Config</span> config <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®é›†ç¾¤åç§°</span>        config<span class="token punctuation">.</span><span class="token function">setClusterName</span><span class="token punctuation">(</span><span class="token string">"FlakeGenerator"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºflakeIdç”Ÿæˆå™¨é…ç½®</span>        <span class="token class-name">FlakeIdGeneratorConfig</span> flakeIdGeneratorConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FlakeIdGeneratorConfig</span><span class="token punctuation">(</span><span class="token string">"flake-id-generator"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é¢„å–æ•°é‡</span>        flakeIdGeneratorConfig<span class="token punctuation">.</span><span class="token function">setPrefetchCount</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é¢„å–æœ‰æ•ˆæœŸ</span>        flakeIdGeneratorConfig<span class="token punctuation">.</span><span class="token function">setPrefetchValidityMillis</span><span class="token punctuation">(</span>MINUTES<span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ·»åŠ é…ç½®</span>        config<span class="token punctuation">.</span><span class="token function">addFlakeIdGeneratorConfig</span><span class="token punctuation">(</span>flakeIdGeneratorConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºå®¢æˆ·ç«¯</span>        <span class="token keyword">return</span> <span class="token class-name">Hazelcast</span><span class="token punctuation">.</span><span class="token function">newHazelcastInstance</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ·»åŠ è®¿é—®æ¥å£ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">HazelcastInstance</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>flakeidgen<span class="token punctuation">.</span></span><span class="token class-name">FlakeIdGenerator</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">jakarta<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RequestMapping</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">RestController</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ArrayList</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token annotation punctuation">@RestController</span><span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/hazelcast"</span><span class="token punctuation">)</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HazelcastController</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Resource</span>    <span class="token keyword">private</span> <span class="token class-name">HazelcastInstance</span> hazelcastInstance<span class="token punctuation">;</span>    <span class="token comment">/**     * ç”Ÿæˆ10ä¸ªflakeId     */</span>    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/gen"</span><span class="token punctuation">)</span>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Long</span><span class="token punctuation">&gt;</span></span> flakeIds <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">FlakeIdGenerator</span> flakeIdGenerator <span class="token operator">=</span> hazelcastInstance<span class="token punctuation">.</span><span class="token function">getFlakeIdGenerator</span><span class="token punctuation">(</span><span class="token string">"flake-id-generator"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            flakeIds<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>flakeIdGenerator<span class="token punctuation">.</span><span class="token function">newId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> flakeIds<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æµè§ˆå™¨è®¿é—®<a href="http://127.0.0.1:8080/hazelcast/gen">http://127.0.0.1:8080/hazelcast/gen</a></p><blockquote><p>ç”Ÿæˆæ•°æ®ç»“æœå¦‚ä¸‹ï¼š</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222231534468.png" alt="image-20250222231534445"></p></li></ul><h4 id="ä¸‰ã€æœåŠ¡å™¨éƒ¨ç½²ç‰ˆ"><a href="#ä¸‰ã€æœåŠ¡å™¨éƒ¨ç½²ç‰ˆ" class="headerlink" title="ä¸‰ã€æœåŠ¡å™¨éƒ¨ç½²ç‰ˆ"></a>ä¸‰ã€æœåŠ¡å™¨éƒ¨ç½²ç‰ˆ</h4><blockquote><p>è¯´æ˜ï¼šæ­¤å¤„æ“ä½œç³»ç»Ÿä»¥Rocky Linux v9.5ä¸ºä¾‹</p></blockquote><ul><li><p><code>Hazelcast</code>éƒ¨ç½²</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æ£€æŸ¥ç³»ç»Ÿæ˜¯å¦å®‰è£…wgetç»„ä»¶wget -V<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>å‡ºç°å¦‚ä¸‹å†…å®¹ï¼Œæ‰“å°å‡ºwgetç‰ˆæœ¬ï¼Œè¯´æ˜å·²ç»å®‰è£…</p><p>å¦‚æœæ²¡æœ‰å®‰è£…åˆ™æ‰§è¡Œï¼Œsudo yum install -y wget</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222232016912.png" alt="image-20250222232016880"></p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æ­¤å¤„æˆ‘ä»¬ä»¥rpmåŒ…çš„æ–¹å¼å®‰è£…# ä¸‹è½½hazelcastçš„rpmä»“åº“ä¾èµ–æ–‡ä»¶wget https://repository.hazelcast.com/rpm/stable/hazelcast-rpm-stable.repo -O hazelcast-rpm-stable.repo# ç§»åŠ¨æ–‡ä»¶åˆ°/etc/yum.repos.d/æ–‡ä»¶å¤¹ä¸‹sudo mv hazelcast-rpm-stable.repo /etc/yum.repos.d/# å®‰è£…hazelcastsudo yum install -y hazelcast-5.5.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>æ£€æŸ¥<code>Hzelcast</code>æ˜¯å¦å®‰è£…æˆåŠŸ</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå‡ºç°ä¸‹å›¾å†…å®¹ï¼Œåˆ™è¯´æ˜å·²ç»æˆåŠŸhz -V<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250223001957231.png" alt="image-20250223001957204"></p><blockquote><p>ä¿®æ”¹å®‰è£…åçš„é…ç½®æ–‡ä»¶å†…å®¹/usr/lib/hazelcast/config/hazelcast.xml</p></blockquote><pre class="line-numbers language-xml" data-language="xml"><code class="language-xml"><span class="token prolog">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hazelcast</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.hazelcast.com/schema/config<span class="token punctuation">"</span></span>           <span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">"</span></span>           <span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>http://www.hazelcast.com/schema/config           http://www.hazelcast.com/schema/config/hazelcast-config-5.5.xsd<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- éœ€è¦ä¿®æ”¹çš„å†…å®¹ï¼Œé›†ç¾¤åç§°ï¼Œå¯¹åº”HazelcastServerConfigä¸­çš„é›†ç¾¤åç§° --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>cluster-name</span><span class="token punctuation">&gt;</span></span>FlakeGenerator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>cluster-name</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>network</span><span class="token punctuation">&gt;</span></span>        <span class="token comment">&lt;!-- ä¿®æ”¹interfaceæ ‡ç­¾ä¸­IPåœ°å€ --&gt;</span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>interfaces</span> <span class="token attr-name">enabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>interface</span><span class="token punctuation">&gt;</span></span>192.168.1.72<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>interface</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>interfaces</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>join</span><span class="token punctuation">&gt;</span></span>             <span class="token comment">&lt;!-- ä¿®æ”¹memberæ ‡ç­¾ä¸­IPåœ°å€ --&gt;</span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tcp-ip</span> <span class="token attr-name">enabled</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>member-list</span><span class="token punctuation">&gt;</span></span>                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>member</span><span class="token punctuation">&gt;</span></span>192.168.1.72<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>member</span><span class="token punctuation">&gt;</span></span>                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>member-list</span><span class="token punctuation">&gt;</span></span>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tcp-ip</span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>join</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>network</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>hazelcast</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ·»åŠ Sprringbooté…ç½®ç±»</p><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">HazelcastClient</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>client<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">ClientConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>client<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">ClientFlakeIdGeneratorConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>client<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">ClientNetworkConfig</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">com<span class="token punctuation">.</span>hazelcast<span class="token punctuation">.</span>core<span class="token punctuation">.</span></span><span class="token class-name">HazelcastInstance</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Bean</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeUnit</span><span class="token punctuation">.</span>MINUTES<span class="token punctuation">;</span><span class="token comment">/** * Hazelcasté…ç½®ç±» * åˆ›å»ºflakeIdç”Ÿæˆå™¨é…ç½® * é¢„å–æ•°é‡ä¸º10ï¼Œé¢„å–æœ‰æ•ˆæœŸ10åˆ†é’Ÿ */</span><span class="token annotation punctuation">@Configuration</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HazelcastServerConfig</span> <span class="token punctuation">{</span>    <span class="token annotation punctuation">@Bean</span>    <span class="token keyword">public</span> <span class="token class-name">HazelcastInstance</span> <span class="token function">hazelcastInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// åˆ›å»ºé…ç½®</span>        <span class="token class-name">ClientConfig</span> clientConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClientConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®é›†ç¾¤åç§°</span>        clientConfig<span class="token punctuation">.</span><span class="token function">setClusterName</span><span class="token punctuation">(</span><span class="token string">"FlakeGenerator"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºflakeIdç”Ÿæˆå™¨é…ç½®</span>        <span class="token class-name">ClientFlakeIdGeneratorConfig</span> clientFlakeIdGeneratorConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClientFlakeIdGeneratorConfig</span><span class="token punctuation">(</span><span class="token string">"flake-id-generator"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é¢„å–æ•°é‡</span>        clientFlakeIdGeneratorConfig<span class="token punctuation">.</span><span class="token function">setPrefetchCount</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// é¢„å–æœ‰æ•ˆæœŸ</span>        clientFlakeIdGeneratorConfig<span class="token punctuation">.</span><span class="token function">setPrefetchValidityMillis</span><span class="token punctuation">(</span>MINUTES<span class="token punctuation">.</span><span class="token function">toMillis</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ·»åŠ é…ç½®</span>        clientConfig<span class="token punctuation">.</span><span class="token function">addFlakeIdGeneratorConfig</span><span class="token punctuation">(</span>clientFlakeIdGeneratorConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®ç½‘ç»œé…ç½®</span>        <span class="token class-name">ClientNetworkConfig</span> clientNetworkConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClientNetworkConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®¾ç½®é›†ç¾¤åœ°å€</span>        clientNetworkConfig<span class="token punctuation">.</span><span class="token function">setAddresses</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">"192.168.1.72:5701"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        clientConfig<span class="token punctuation">.</span><span class="token function">setNetworkConfig</span><span class="token punctuation">(</span>clientNetworkConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// åˆ›å»ºå®¢æˆ·ç«¯</span>        <span class="token keyword">return</span> <span class="token class-name">HazelcastClient</span><span class="token punctuation">.</span><span class="token function">newHazelcastClient</span><span class="token punctuation">(</span>clientConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æ·»åŠ è®¿é—®æ¥å£ç±»</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">import com.hazelcast.core.HazelcastInstance;import com.hazelcast.flakeidgen.FlakeIdGenerator;import jakarta.annotation.Resource;import org.springframework.web.bind.annotation.RequestMapping;import org.springframework.web.bind.annotation.RestController;import java.util.ArrayList;import java.util.List;@RestController@RequestMapping("/hazelcast")public class HazelcastController {    @Resource    private HazelcastInstance hazelcastInstance;    /**     * ç”Ÿæˆ10ä¸ªflakeId     */    @RequestMapping("/gen")    public List&lt;Long&gt; gen() {        List&lt;Long&gt; flakeIds = new ArrayList&lt;&gt;(10);        FlakeIdGenerator flakeIdGenerator = hazelcastInstance.getFlakeIdGenerator("flake-id-generator");        for (int i = 0; i &lt; 10; i++) {            flakeIds.add(flakeIdGenerator.newId());        }        return flakeIds;    }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>æµè§ˆå™¨è®¿é—®<a href="http://127.0.0.1:8080/hazelcast/gen">http://127.0.0.1:8080/hazelcast/gen</a></p><blockquote><p>ç”Ÿæˆæ•°æ®ç»“æœå¦‚ä¸‹ï¼š</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250223005010505.png" alt="image-20250223005010478"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> java </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LM Studioæ¨¡å‹æœ¬åœ°åŒ–éƒ¨ç½²ï¼šå¿«é€Ÿå…¥é—¨æŒ‡å—ï¼</title>
      <link href="//2025/02/16/lmstudio-local-model-deploy/"/>
      <url>//2025/02/16/lmstudio-local-model-deploy/</url>
      
        <content type="html"><![CDATA[<h1 id="LM-Studioæ¨¡å‹æœ¬åœ°åŒ–éƒ¨ç½²ï¼šå¿«é€Ÿå…¥é—¨æŒ‡å—ï¼"><a href="#LM-Studioæ¨¡å‹æœ¬åœ°åŒ–éƒ¨ç½²ï¼šå¿«é€Ÿå…¥é—¨æŒ‡å—ï¼" class="headerlink" title="LM Studioæ¨¡å‹æœ¬åœ°åŒ–éƒ¨ç½²ï¼šå¿«é€Ÿå…¥é—¨æŒ‡å—ï¼"></a>LM Studioæ¨¡å‹æœ¬åœ°åŒ–éƒ¨ç½²ï¼šå¿«é€Ÿå…¥é—¨æŒ‡å—ï¼</h1><blockquote><p>ç‰¹æ®Šè¯´æ˜ï¼š</p><p>huggingface.coç½‘ç«™éœ€è¦ç§‘å­¦ä¸Šç½‘æ‰å¯è®¿é—®</p></blockquote><ul><li><p>ä¸‹è½½LM Studioï¼Œåœ°å€ï¼š<a href="https://lmstudio.ai/">LM Studio - Discover, download, and run local LLMs</a></p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212131407.png" alt="image-20250222212131369"></p></li><li><p>æ ¹æ®è‡ªå·±è‡ªå·±æ“ä½œç³»ç»Ÿä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬ï¼Œæ­¤å¤„ä»¥windowsç¯å¢ƒä¸ºä¾‹ï¼Œä¸‹è½½å¦‚ä¸‹ç‰ˆæœ¬ï¼š</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212201595.png" alt="image-20250222212201573"></p></li><li><p>å®‰è£…LM Studio</p><ul><li><p>åŒå‡»LM-Studio-0.3.9-6-x64.exe</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212236095.png" alt="image-20250222212236070"></p></li><li><p>æ ¹æ®è‡ªå·±çš„å–œå¥½ï¼Œé€‰æ‹©å®‰è£…ç›®å½•</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212302810.png" alt="image-20250222212302786"></p></li><li><p>ç‚¹å‡»å®‰è£…ï¼Œç­‰å¾…å®‰è£…å®Œæˆ</p></li><li><p>å®‰è£…å®Œæˆåï¼Œç‚¹å‡»å®Œæˆï¼Œå¦‚æœæƒ³ç«‹å³ä½¿ç”¨ï¼Œåˆ™ä¸è¦å»æ‰å‹¾é€‰é¡¹ï¼ˆè¿è¡ŒLM Studioï¼‰</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212325327.png" alt="image-20250222212325304"></p></li></ul></li><li><p>LM Studio ä½¿ç”¨</p><ul><li><p>æ‰“å¼€LM Studio ,é»˜è®¤æƒ…å†µæ˜¯æ²¡æœ‰åŠ è½½ä»»ä½•æ¨¡å‹ï¼Œéœ€è¦ä¸‹è½½æ¨¡å‹</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212432716.png" alt="image-20250222212432670"></p></li><li><p>é¦–å…ˆæ ¹æ®è‡ªå·±çš„å–œå¥½è°ƒæ•´æ¨¡å‹ä¿å­˜è·¯å¾„</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212447137.png" alt="image-20250222212447092"></p></li><li><p>ä¸‹è½½æ¨¡å‹</p><ul><li><p>æ–¹å¼ä¸€ï¼šåˆ°<a href="https://huggingface.co/">Hugging Face â€“ The AI community building the future.</a>ä¸‹è½½å¼€æºæ¨¡å‹</p><ul><li><p>è¿›å…¥Hugging Faceç½‘ç«™</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212506350.png" alt="image-20250222212506288"></p></li><li><p>æœç´¢æ¨¡å‹(deepseek r1)ï¼Œé€‰æ‹©See all results for â€œdeepseek r1 7b ggufâ€</p><blockquote><p>è¯´æ˜ï¼šLM Studio éœ€è¦åŠ è½½çš„æ¨¡å‹æ–‡ä»¶è¦ä¸ºggufç»“å°¾çš„æ–‡ä»¶</p><p>æˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°ä¸€äº›safetensorsç»“å°¾çš„æ–‡ä»¶ï¼Œè¿™ç§æ ¼å¼çš„æ–‡ä»¶ï¼Œéœ€è¦è½¬æ¢æˆggufæ ¼å¼çš„æ–‡ä»¶æ‰å¯ä»¥åœ¨LM Studioä¸­ä½¿ç”¨</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212603226.png" alt="image-20250222212603191"></p></li><li><p>æœç´¢ç»“æœå¦‚ä¸‹ï¼Œç­›é€‰å‡ºæœ€åæ¬¢è¿æˆ–è€…ä¸‹è½½é‡æœ€å¤§çš„å³å¯</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212621528.png" alt="image-20250222212621422"></p></li><li><p>ä»ä¸Šé¢çš„ç»“æœé€‰æ‹©å…¶ä¸­ä¸€ä¸ªï¼Œæ­¤å¤„æˆ‘é€‰æ‹©lmstudio-communityä¸‹é¢çš„æ¨¡å‹ï¼Œé€‰æ‹©åæˆ‘ä»¬ä¼šçœ‹åˆ°å¦‚ä¸‹ç»“æœ</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212637184.png" alt="image-20250222212637138"></p></li><li><p>é€‰æ‹©Files and versionsï¼Œä¸‹è½½å¯¹åº”çš„æ¨¡å‹æ–‡ä»¶å³å¯</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212653419.png" alt="image-20250222212653376"></p></li><li><p>åœ¨å‰é¢é…ç½®å¥½çš„æ¨¡å‹ä¿å­˜è·¯å¾„æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºæ¨¡å‹ä¿å­˜çš„ç›®å½•ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212709441.png" alt="image-20250222212709422"></p><blockquote><p>è¯´æ˜ï¼šæ­¤å¤„ä½œè€…ä½¿ç”¨çš„æ˜¯åœ¨H:\modelsè¿™ä¸ªè·¯å¾„</p><p>æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸‹è½½çš„æ¨¡å‹åˆ›å»ºå¦‚ä¸‹çš„ç›®å½•</p><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨H:\modelsç›®å½•ä¸‹åˆ›å»ºlmstudio-communityæ–‡ä»¶å¤¹</p><p>ç„¶åå†åœ¨H:\models\lmstudio-communityç›®å½•ä¸‹åˆ›å»ºDeepSeek-R1-Distill-Qwen-7B-GGUFæ–‡ä»¶å¤¹</p><p>æœ€åå°†ä¸‹è½½å¥½çš„æ¨¡å‹æ”¾åœ¨H:\models\lmstudio-community\DeepSeek-R1-Distill-Qwen-7B-GGUF</p><p>lmstudio-communityæ˜¯æŒ‡å‘å¸ƒè€…</p><p>DeepSeek-R1-Distill-Qwen-7B-GGUFæ˜¯æŒ‡æ¨¡å‹åç§°</p></blockquote><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212725201.png" alt="image-20250222212725180"></p></li></ul></li><li><p>æ–¹å¼äºŒï¼šåœ¨LM Studioå·¥å…·ä¸­ä¸‹è½½å¼€æºæ¨¡å‹</p><ul><li><p>é€‰æ‹©å‘ç°æ ‡ç­¾ï¼ˆæ”¾å¤§é•œå›¾æ ‡ï¼‰ï¼Œä¼šå¼¹å‡ºå¦‚ä¸‹é€‰æ‹©æ¡†</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212738345.png" alt="image-20250216193944111"></p></li><li><p>æ ¹æ®ä¸Šé¢çš„æ“ä½œç»“æœï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œé€‰æ‹©äº†æ¨¡å‹ä½†æ˜¯å³ä¾§æç¤ºNo result foundï¼ï¼ï¼</p><blockquote><p>æ­¤å¤„æ˜¯å› ä¸ºä¸‹è½½æºåœ¨å›½å†…æ— æ³•æ­£å¸¸ä½¿ç”¨</p></blockquote></li><li><p>ä¿®æ”¹æ¨¡å‹ä¸‹è½½æº</p><blockquote><p>è¯´æ˜ï¼šæ­¤å¤„æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸¤ä¸ªæ–‡ä»¶ï¼Œé¦–å…ˆè¿›å…¥LM Studioçš„å®‰è£…ç›®å½•ï¼Œæ­¤å¤„ä»¥ä½œè€…çš„ä¸ºä¾‹ï¼Œæˆ‘çš„å®‰è£…ç›®å½•åœ¨D:\Develop\tools\LM Studio</p><p>1.ç¬¬ä¸€ä¸ªæ–‡ä»¶ï¼ŒD:\Develop\tools\LM Studio\resources\app.webpack\main\index.js</p><p>2.ç¬¬äºŒä¸ªæ–‡ä»¶ï¼ŒD:\Develop\tools\LM Studio\resources\app.webpack\renderer\main_window.js</p><p>å°†è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­æ‰€æœ‰çš„<code>huggingface.co</code>æ›¿æ¢ä¸º<code>hf-mirror.com</code></p></blockquote></li><li><p>å…³é—­LM Studioï¼Œé‡æ–°æ‰“å¼€ï¼Œæˆ‘ä»¬ä¼šå‘ç°ï¼Œåˆšåˆšæ— æ³•ä¸‹è½½çš„æ¨¡å‹ï¼Œå‡å¯ä»¥ä¸‹è½½</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212747630.png" alt="image-20250216194907340"></p></li></ul></li><li><p>åŠ è½½æ¨¡å‹ï¼Œè°ƒç”¨æ¨¡å‹è¿›è¡Œä½¿ç”¨</p><ul><li><p>å›åˆ°èŠå¤©ç•Œé¢ï¼Œé€‰æ‹©æ¨¡å‹åŠ è½½</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212755026.png" alt="image-20250216195034768"></p></li><li><p>é€‰æ‹©åŠ åœ¨æ¨¡å‹ï¼Œä¼šåˆ—å‡ºæ‰€æœ‰æœ¬åœ°ä¸‹è½½å¥½çš„æ¨¡å‹ï¼Œæ­¤å¤„æˆ‘ä»¬ä½¿ç”¨ç¤ºä¾‹ä¸­çš„æ¨¡å‹</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212802893.png" alt="image-20250216195156978"></p></li><li><p>åŠ è½½æ¨¡å‹</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212810356.png" alt="image-20250216195217313"></p></li><li><p>åˆ›å»ºèŠå¤©</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212815920.png" alt="image-20250216195238424"></p></li><li><p>åœ¨æ­¤å¤„è¾“å…¥éœ€è¦å¯¹è¯çš„å†…å®¹ </p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212833899.png" alt="image-20250216195412268"></p></li><li><p>åé¦ˆç»“æœ</p><p><img src="https://raw.githubusercontent.com/Nicholas2015/Pictures/ollama/20250222212842068.png" alt="image-20250216195541431"></p></li></ul></li></ul></li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> AI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è§£é”æ¨¡å‹é­”æ³•ï¼šä½ éœ€è¦çš„åŸºç¡€çŸ¥è¯†ç§˜ç±</title>
      <link href="//2025/02/15/llm-model-basic-introduction/"/>
      <url>//2025/02/15/llm-model-basic-introduction/</url>
      
        <content type="html"><![CDATA[<h2 id="è§£é”æ¨¡å‹é­”æ³•ï¼šä½ éœ€è¦çš„åŸºç¡€çŸ¥è¯†ç§˜ç±"><a href="#è§£é”æ¨¡å‹é­”æ³•ï¼šä½ éœ€è¦çš„åŸºç¡€çŸ¥è¯†ç§˜ç±" class="headerlink" title="è§£é”æ¨¡å‹é­”æ³•ï¼šä½ éœ€è¦çš„åŸºç¡€çŸ¥è¯†ç§˜ç±"></a>è§£é”æ¨¡å‹é­”æ³•ï¼šä½ éœ€è¦çš„åŸºç¡€çŸ¥è¯†ç§˜ç±</h2><blockquote><p>æˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°æ¨¡å‹çš„åå­—ä¸­ä¼šå¸¦æœ‰0.5Bã€7Bã€32Bç­‰ç­‰ï¼Œå…¶ä¸­Bè¡¨ç¤ºæ˜¯Billion(åäº¿)ä¸ªå‚æ•°</p></blockquote><table><thead><tr><th>æ¨¡å‹å¤§å°</th><th>å‚æ•°æ•°é‡</th></tr></thead><tbody><tr><td>0.5B</td><td>5äº¿</td></tr><tr><td>1.5B</td><td>15äº¿</td></tr><tr><td>7B</td><td>70äº¿</td></tr><tr><td>13B</td><td>130äº¿</td></tr><tr><td>32B</td><td>320äº¿</td></tr><tr><td>70B</td><td>700äº¿</td></tr></tbody></table><h4 id="è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œå†…å­˜-ç£ç›˜å­˜å‚¨ï¼ŒåŸºæœ¬å•ä½ä¸ºå­—èŠ‚ï¼ˆbyteï¼‰"><a href="#è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œå†…å­˜-ç£ç›˜å­˜å‚¨ï¼ŒåŸºæœ¬å•ä½ä¸ºå­—èŠ‚ï¼ˆbyteï¼‰" class="headerlink" title="è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œå†…å­˜/ç£ç›˜å­˜å‚¨ï¼ŒåŸºæœ¬å•ä½ä¸ºå­—èŠ‚ï¼ˆbyteï¼‰"></a>è®¡ç®—æœºåŸºç¡€çŸ¥è¯†ï¼Œå†…å­˜/ç£ç›˜å­˜å‚¨ï¼ŒåŸºæœ¬å•ä½ä¸ºå­—èŠ‚ï¼ˆbyteï¼‰</h4><table><thead><tr><th>å•ä½</th><th>æ¢ç®—</th></tr></thead><tbody><tr><td>KB</td><td>1 KB=1024 Bytes</td></tr><tr><td>MB</td><td>1 MB=1024 KB</td></tr><tr><td>GB</td><td>1 GB=1024 MB</td></tr><tr><td>TB</td><td>1 TB=1024 GB</td></tr></tbody></table><h4 id="è®­ç»ƒæ¨¡å‹å‚æ•°ç±»å‹"><a href="#è®­ç»ƒæ¨¡å‹å‚æ•°ç±»å‹" class="headerlink" title="è®­ç»ƒæ¨¡å‹å‚æ•°ç±»å‹"></a>è®­ç»ƒæ¨¡å‹å‚æ•°ç±»å‹</h4><table><thead><tr><th>å‚æ•°ç±»å‹</th><th>å ç”¨å­—èŠ‚</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>float</td><td>4 bytes</td><td>32ä½æµ®ç‚¹æ•°</td></tr><tr><td>half/BF16</td><td>2 bytes</td><td>16ä½æµ®ç‚¹æ•°</td></tr><tr><td>int8</td><td>1 bytes</td><td>8ä½æ•´æ•°</td></tr><tr><td>int4</td><td>0.5 bytes</td><td>4ä½æ•´æ•°</td></tr></tbody></table><h4 id="è¯„ä¼°å†…å­˜ä½¿ç”¨éœ€æ±‚"><a href="#è¯„ä¼°å†…å­˜ä½¿ç”¨éœ€æ±‚" class="headerlink" title="è¯„ä¼°å†…å­˜ä½¿ç”¨éœ€æ±‚"></a>è¯„ä¼°å†…å­˜ä½¿ç”¨éœ€æ±‚</h4><blockquote><p>æ­¤å¤„ä»¥Qwen2.5-VL-7B-Instruct-bf16ä¸ºä¾‹</p></blockquote><ol><li>7B = 7 Billion 70äº¿ä¸ªå‚æ•°</li><li>BF16 = ä½¿ç”¨å‚æ•°ç±»å‹ä¸ºhalf/BF16ï¼Œå ç”¨2ä¸ªå­—èŠ‚</li></ol><p>è®¡ç®—ï¼šéœ€è¦å ç”¨å­—èŠ‚æ•°ï¼š7,000,000,000 * 2 = 14,000,000,000 bytes ä¹Ÿå°±æ˜¯140äº¿å­—èŠ‚</p><blockquote><p>æ¢ç®—æˆå ç”¨å¤šå°‘GB</p></blockquote><p>= 14 * 1000 * 1000 * 1000 / 1024 / 1024 / 1024 = 14 *  </p><p>â‰ˆ 14 * 0.93 </p><p>â‰ˆ 13.02 GB</p><blockquote><p>è¯´æ˜ï¼š<br>$$<br>1000 * 1000 * 1000 / 1024 / 1024 / 1024 = (1000 / 1024)^3 â‰ˆ 0.93<br>$$</p></blockquote><h4 id="è¯„ä¼°æ¨¡å‹è®­ç»ƒéœ€æ±‚"><a href="#è¯„ä¼°æ¨¡å‹è®­ç»ƒéœ€æ±‚" class="headerlink" title="è¯„ä¼°æ¨¡å‹è®­ç»ƒéœ€æ±‚"></a>è¯„ä¼°æ¨¡å‹è®­ç»ƒéœ€æ±‚</h4><blockquote><p>è¯´æ˜ï¼š</p><p>ä¸ºäº†ç¡®ä¿æ¨¡å‹è®­ç»ƒçš„ç²¾å‡†åº¦ï¼Œä¸€èˆ¬å‚æ•°ç±»å‹é€‰æ‹©floatç±»å‹ï¼Œå¦‚æœç¡¬ä»¶æ€§èƒ½ç¨å¾®å·®ç‚¹ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©half/BF16ï¼Œä½†æ˜¯ä¸èƒ½é€‰æ‹©Int8å’ŒInt4ã€‚</p><p>ç”±äºæ¨¡å‹è®­ç»ƒæ”¶åˆ°åå‘ä¼ æ’­ç®—æ³•ã€Adamä¼˜åŒ–ç®—æ³•ä»¥åŠTransformeræ¶æ„ç­‰å› ç´ çš„å½±å“ï¼Œè®­ç»ƒæ‰€éœ€çš„å†…å­˜ä¸€èˆ¬æ˜¯LLMï¼ˆLarge Language Modelï¼‰å†…å­˜éœ€æ±‚çš„3~4å€ã€‚</p></blockquote><h5 id="ä¾‹å¦‚ï¼šè®­ç»ƒQwen-7Bæ¨¡å‹æ‰€éœ€çš„å†…å­˜è®¡ç®—ï¼ˆä¿å®ˆä¼°ç®—æŒ‰ç…§4å€çš„æ–¹æ¡ˆæ¥è®¡ç®—ï¼‰"><a href="#ä¾‹å¦‚ï¼šè®­ç»ƒQwen-7Bæ¨¡å‹æ‰€éœ€çš„å†…å­˜è®¡ç®—ï¼ˆä¿å®ˆä¼°ç®—æŒ‰ç…§4å€çš„æ–¹æ¡ˆæ¥è®¡ç®—ï¼‰" class="headerlink" title="ä¾‹å¦‚ï¼šè®­ç»ƒQwen-7Bæ¨¡å‹æ‰€éœ€çš„å†…å­˜è®¡ç®—ï¼ˆä¿å®ˆä¼°ç®—æŒ‰ç…§4å€çš„æ–¹æ¡ˆæ¥è®¡ç®—ï¼‰"></a>ä¾‹å¦‚ï¼šè®­ç»ƒQwen-7Bæ¨¡å‹æ‰€éœ€çš„å†…å­˜è®¡ç®—ï¼ˆä¿å®ˆä¼°ç®—æŒ‰ç…§4å€çš„æ–¹æ¡ˆæ¥è®¡ç®—ï¼‰</h5><ol><li>ä½¿ç”¨Floatå‚æ•°ç±»å‹æ¥è®¡ç®—ï¼Œ7B * 4 * 4 â‰ˆ 104GB</li><li>ä½¿ç”¨half/BF16å‚æ•°ç±»å‹è®¡ç®—ï¼Œ7B * 2 * 4 â‰ˆ 52GB</li></ol>]]></content>
      
      
      <categories>
          
          <category> AI </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>elasticsearché›†ç¾¤å®‰è£…ä¸éƒ¨ç½²</title>
      <link href="//2023/01/25/elasticsearch-cluster-install/"/>
      <url>//2023/01/25/elasticsearch-cluster-install/</url>
      
        <content type="html"><![CDATA[<h1 id="Elasticsearchéƒ¨ç½²"><a href="#Elasticsearchéƒ¨ç½²" class="headerlink" title="Elasticsearchéƒ¨ç½²"></a>Elasticsearchéƒ¨ç½²</h1><h3 id="ä¸€ã€ç¯å¢ƒå‡†å¤‡"><a href="#ä¸€ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸€ã€ç¯å¢ƒå‡†å¤‡"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h3><ol><li>ç‰©ç†æœºé…ç½®</li></ol><table><thead><tr><th>æ•°é‡</th><th align="left">é…ç½®</th><th>æ“ä½œç³»ç»Ÿ</th><th>IPåœ°å€</th></tr></thead><tbody><tr><td>6</td><td align="left">å¤„ç†å™¨ï¼š56æ ¸å¿ƒ<br>å†…å­˜ï¼š512GB<br>ç³»ç»Ÿç›˜ï¼š1T * 2 SSDå›ºæ€ç›˜<br>æ•°æ®ç›˜ï¼š8T * 10æœºæ¢°ç›˜</td><td>Linux CentOS 7.5</td><td>192.168.70.130<br>192.168.70.131<br>192.168.70.132<br>192.168.70.133<br>192.168.70.134<br>192.168.70.135</td></tr></tbody></table><ol start="2"><li>è½¯ä»¶ä¿¡æ¯<blockquote><p>JDKç‰ˆæœ¬ï¼š1.8<br><br>Elasticsearchç‰ˆæœ¬ï¼š7.0</p></blockquote></li></ol><h3 id="äºŒã€æ­å»ºç¯å¢ƒ"><a href="#äºŒã€æ­å»ºç¯å¢ƒ" class="headerlink" title="äºŒã€æ­å»ºç¯å¢ƒ"></a>äºŒã€æ­å»ºç¯å¢ƒ</h3><ol><li>è½¯ä»¶ç¯å¢ƒä¿¡æ¯<pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># åˆ›å»ºç›®å½•ä¸ºelasticsearchå®‰è£…åšå‡†å¤‡$ mkdir -p /opt/elastic$ mkdir -p /opt/elastic/node-01$ mkdir -p /opt/elastic/node-02$ mkdir -p /opt/elastic/node-03$ mkdir -p /opt/elastic/node-04$ mkdir -p /opt/elastic/node-05$ mkdir -p /opt/elastic/node-client# åˆ›å»ºç›®å½•ç”¨äºä¸‹è½½æ–‡ä»¶ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±ä¹ æƒ¯æ“ä½œ$ mkdir -p /home/software$ cd /home/software# ä¸‹è½½JDK$ wget https://download.oracle.com/otn/java/jdk/8u351-b10/10e8cce67c7843478f41411b7003171c/jdk-8u351-linux-x64.tar.gz?AuthParam=1670730205_7f2b9f799e119cf35d27add28a8187cf# è§£å‹jdkæ–‡ä»¶ tar$ tar -zxvf jdk-8u351-linux-x64.tar.gz# æŸ¥çœ‹å½“å‰æœºå™¨æ˜¯å¦å®‰è£…è¿‡jdk$ rpm -qa |grep java# åˆ é™¤ä»¥javaå¼€å¤´çš„æ–‡ä»¶$ rpm -e --nodeps java*# åˆ é™¤å®Œæ¯•åå¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤ç¡®è®¤æ˜¯å¦è¿˜å­˜åœ¨ï¼Œå¦‚æœæç¤ºcommandæ‰¾ä¸åˆ°ï¼Œè¯´æ˜ç§»é™¤å®Œæˆ$ java -version# é…ç½®JDK$ vim /etc/profile# åœ¨æœ€åä¸€è¡Œæ·»åŠ å¦‚ä¸‹å†…å®¹export JAVA_HOME=/home/local/java/jdk1.8.0_271export PATH=$JAVA_HOME/bin:$PATHexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar# ä¿å­˜å†…å®¹æŒ‰ä¸‹escé”®ï¼Œæ“ä½œ:wqä¿å­˜æ–‡ä»¶å†…å®¹# é‡æ–°åŠ è½½æ–‡ä»¶ï¼Œä½¿å…¶ç”Ÿæ•ˆ$ source /etc/profile# éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼Œå¦‚æœå‘½ä»¤æ­£å¸¸è¯´æ˜å·²ç»æˆåŠŸ$ java -version # ä¸‹è½½elasticsearch$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.0.0-linux-x86_64.tar.gz# è§£å‹Elasticsearch$ tar -zxvf elasticsearch-7.0.0-linux-x86_64.tar.gz$ cp /home/software/elasticsearch /opt/elastic/node-01$ cp /home/software/elasticsearch /opt/elastic/node-02$ cp /home/software/elasticsearch /opt/elastic/node-03$ cp /home/software/elasticsearch /opt/elastic/node-04$ cp /home/software/elasticsearch /opt/elastic/node-05$ cp /home/software/elasticsearch /opt/elastic/node-client<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>èŠ‚ç‚¹åˆ†é…<br><br>node-01ä¸ºå³æ˜¯masterèŠ‚ç‚¹ä¹Ÿæ˜¯dataèŠ‚ç‚¹<br><br>node-02~node-05ä¸ºdataèŠ‚ç‚¹<br><br>node-clientä¸ºå®¢æˆ·ç«¯èŠ‚ç‚¹ï¼Œä¸å……å½“masterèŠ‚ç‚¹å’ŒdataèŠ‚ç‚¹ï¼Œä»…ä½œä¸ºå¯¹å¤–å®¢æˆ·ç«¯è¿æ¥<br><br>è¯´æ˜ï¼š<br><br>æ­¤å¤„clientå¯ä»¥çœç•¥ï¼Œä¹Ÿå¯ä»¥æ”¾åˆ°node-01ä¸Š<br></p></blockquote></li></ol><ul><li>å®¢æˆ·ç«¯èŠ‚ç‚¹é…ç½®<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># è¿™ç§ç»„åˆè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹å³ä¸ä¼šæˆä¸ºä¸»èŠ‚ç‚¹ï¼Œä¹Ÿä¸ä¼šå­˜å‚¨æ•°æ®ï¼Œè¿™ä¸ªèŠ‚ç‚¹çš„æ„ä¹‰æ˜¯ä½œä¸ºä¸€ä¸ªclient(å®¢æˆ·ç«¯)èŠ‚ç‚¹ï¼Œä¸»è¦æ˜¯é’ˆå¯¹æµ·é‡è¯·æ±‚çš„æ—¶å€™å¯ä»¥è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚</span><span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> elastic<span class="token punctuation">-</span>cluster<span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> 130<span class="token punctuation">-</span>node<span class="token punctuation">-</span>client<span class="token key atrule">network.host</span><span class="token punctuation">:</span> 192.168.70.130<span class="token key atrule">http.port</span><span class="token punctuation">:</span> <span class="token number">9200</span><span class="token key atrule">transport.port</span><span class="token punctuation">:</span> <span class="token number">9300</span><span class="token comment"># æ˜¯å¦ä¸ºmasterèŠ‚ç‚¹</span><span class="token key atrule">node.master</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token comment"># æ˜¯å¦ä¸ºdataèŠ‚ç‚¹</span><span class="token key atrule">node.data</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">cluster.initial_master_nodes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"130-node-01"</span><span class="token punctuation">,</span> <span class="token string">"131-node-01"</span><span class="token punctuation">,</span><span class="token string">"132-node-01"</span><span class="token punctuation">,</span><span class="token string">"133-node-01"</span><span class="token punctuation">,</span><span class="token string">"134-node-01"</span><span class="token punctuation">,</span><span class="token string">"135-node-01"</span><span class="token punctuation">]</span><span class="token key atrule">discovery.seed_hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"192.168.70.130:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.131:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.132:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.133:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.134:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.135:9201"</span><span class="token punctuation">]</span><span class="token comment"># é”å®šç‰©ç†å†…å­˜åœ°å€ï¼Œé˜²æ­¢eså†…å­˜è¢«äº¤æ¢å‡ºå»ï¼Œä¹Ÿå°±æ˜¯é¿å…esä½¿ç”¨swapäº¤æ¢åˆ†åŒºï¼Œé¢‘ç¹çš„äº¤æ¢ï¼Œä¼šå¯¼è‡´IOPSå˜é«˜</span><span class="token key atrule">bootstrap.memory_lock</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token comment"># è·¨åŸŸé…ç½®</span><span class="token key atrule">http.cors.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">http.cors.allow-origin</span><span class="token punctuation">:</span> <span class="token string">"*"</span><span class="token comment"># è¶…å‡ºé™åˆ¶ï¼Œæ¸…é™¤å†…å­˜å·²æœ‰çš„fielddata</span><span class="token key atrule">indices.fielddata.cache.size</span><span class="token punctuation">:</span> 30%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>MasterèŠ‚ç‚¹é…ç½®<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># è¿™ç§ç»„åˆè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹å³æœ‰æˆä¸ºä¸»èŠ‚ç‚¹çš„èµ„æ ¼ï¼Œåˆå­˜å‚¨æ•°æ®ã€‚è¿™ä¸ªæ—¶å€™å¦‚æœæŸä¸ªèŠ‚ç‚¹è¢«é€‰ä¸¾æˆä¸ºäº†çœŸæ­£çš„ä¸»èŠ‚ç‚¹ï¼Œé‚£ä¹ˆä»–è¿˜è¦å­˜å‚¨æ•°æ®ï¼Œè¿™æ ·å¯¹äºè¿™ä¸ªèŠ‚ç‚¹çš„å‹åŠ›å°±æ¯”è¾ƒå¤§äº†ã€‚elasticsearché»˜è®¤æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯è¿™æ ·çš„é…ç½®ï¼Œåœ¨æµ‹è¯•ç¯å¢ƒä¸‹è¿™æ ·åšæ²¡é—®é¢˜ã€‚å®é™…å·¥ä½œä¸­å»ºè®®ä¸è¦è¿™æ ·è®¾ç½®ï¼Œè¿™æ ·ç›¸å½“äºä¸»èŠ‚ç‚¹å’Œæ•°æ®èŠ‚ç‚¹çš„è§’è‰²æ··åˆåˆ°ä¸€å—äº†</span><span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> elastic<span class="token punctuation">-</span>cluster<span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> 130<span class="token punctuation">-</span>node<span class="token punctuation">-</span><span class="token number">01</span><span class="token key atrule">network.host</span><span class="token punctuation">:</span> 192.168.70.130<span class="token key atrule">http.port</span><span class="token punctuation">:</span> <span class="token number">9201</span><span class="token key atrule">transport.port</span><span class="token punctuation">:</span> <span class="token number">9301</span><span class="token comment"># æ˜¯å¦ä¸ºmasterèŠ‚ç‚¹</span><span class="token key atrule">node.master</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token comment"># æ˜¯å¦ä¸ºdataèŠ‚ç‚¹</span><span class="token key atrule">node.data</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">cluster.initial_master_nodes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"130-node-01"</span><span class="token punctuation">,</span> <span class="token string">"131-node-01"</span><span class="token punctuation">,</span><span class="token string">"132-node-01"</span><span class="token punctuation">,</span><span class="token string">"133-node-01"</span><span class="token punctuation">,</span><span class="token string">"134-node-01"</span><span class="token punctuation">,</span><span class="token string">"135-node-01"</span><span class="token punctuation">]</span><span class="token key atrule">discovery.seed_hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"192.168.70.130:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.131:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.132:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.133:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.134:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.135:9201"</span><span class="token punctuation">]</span><span class="token comment"># é”å®šç‰©ç†å†…å­˜åœ°å€ï¼Œé˜²æ­¢eså†…å­˜è¢«äº¤æ¢å‡ºå»ï¼Œä¹Ÿå°±æ˜¯é¿å…esä½¿ç”¨swapäº¤æ¢åˆ†åŒºï¼Œé¢‘ç¹çš„äº¤æ¢ï¼Œä¼šå¯¼è‡´IOPSå˜é«˜</span><span class="token key atrule">bootstrap.memory_lock</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token comment"># è·¨åŸŸé…ç½®</span><span class="token key atrule">http.cors.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">http.cors.allow-origin</span><span class="token punctuation">:</span> <span class="token string">"*"</span><span class="token comment"># è¶…å‡ºé™åˆ¶ï¼Œæ¸…é™¤å†…å­˜å·²æœ‰çš„fielddata</span><span class="token key atrule">indices.fielddata.cache.size</span><span class="token punctuation">:</span> 30%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li>DataèŠ‚ç‚¹é…ç½®ï¼ˆnode-02~node-05ï¼‰æ­¤å¤„ä»¥node-02ä¸ºä¾‹<pre class="line-numbers language-yaml" data-language="yaml"><code class="language-yaml"><span class="token comment"># è¿™ç§ç»„åˆè¡¨ç¤ºè¿™ä¸ªèŠ‚ç‚¹æ²¡æœ‰æˆä¸ºä¸»èŠ‚ç‚¹çš„èµ„æ ¼ï¼Œä¹Ÿå°±ä¸å‚ä¸é€‰ä¸¾ï¼Œåªä¼šå­˜å‚¨æ•°æ®ã€‚è¿™ä¸ªèŠ‚ç‚¹æˆ‘ä»¬ç§°ä¸ºdata(æ•°æ®)èŠ‚ç‚¹ã€‚åœ¨é›†ç¾¤ä¸­éœ€è¦å•ç‹¬è®¾ç½®å‡ ä¸ªè¿™æ ·çš„èŠ‚ç‚¹è´Ÿè´£å­˜å‚¨æ•°æ®ï¼ŒåæœŸæä¾›å­˜å‚¨å’ŒæŸ¥è¯¢æœåŠ¡ã€‚</span><span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> elastic<span class="token punctuation">-</span>cluster<span class="token key atrule">cluster.name</span><span class="token punctuation">:</span> 130<span class="token punctuation">-</span>node<span class="token punctuation">-</span><span class="token number">02</span><span class="token key atrule">network.host</span><span class="token punctuation">:</span> 192.168.70.130<span class="token key atrule">http.port</span><span class="token punctuation">:</span> <span class="token number">9202</span><span class="token key atrule">transport.port</span><span class="token punctuation">:</span> <span class="token number">9302</span><span class="token comment"># æ˜¯å¦ä¸ºmasterèŠ‚ç‚¹</span><span class="token key atrule">node.master</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token comment"># æ˜¯å¦ä¸ºdataèŠ‚ç‚¹</span><span class="token key atrule">node.data</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">cluster.initial_master_nodes</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"130-node-01"</span><span class="token punctuation">,</span> <span class="token string">"131-node-01"</span><span class="token punctuation">,</span><span class="token string">"132-node-01"</span><span class="token punctuation">,</span><span class="token string">"133-node-01"</span><span class="token punctuation">,</span><span class="token string">"134-node-01"</span><span class="token punctuation">,</span><span class="token string">"135-node-01"</span><span class="token punctuation">]</span><span class="token key atrule">discovery.seed_hosts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"192.168.70.130:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.131:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.132:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.133:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.134:9201"</span><span class="token punctuation">,</span> <span class="token string">"192.168.70.135:9201"</span><span class="token punctuation">]</span><span class="token comment"># é”å®šç‰©ç†å†…å­˜åœ°å€ï¼Œé˜²æ­¢eså†…å­˜è¢«äº¤æ¢å‡ºå»ï¼Œä¹Ÿå°±æ˜¯é¿å…esä½¿ç”¨swapäº¤æ¢åˆ†åŒºï¼Œé¢‘ç¹çš„äº¤æ¢ï¼Œä¼šå¯¼è‡´IOPSå˜é«˜</span><span class="token key atrule">bootstrap.memory_lock</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token comment"># è·¨åŸŸé…ç½®</span><span class="token key atrule">http.cors.enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">http.cors.allow-origin</span><span class="token punctuation">:</span> <span class="token string">"*"</span><span class="token comment"># è¶…å‡ºé™åˆ¶ï¼Œæ¸…é™¤å†…å­˜å·²æœ‰çš„fielddata</span><span class="token key atrule">indices.fielddata.cache.size</span><span class="token punctuation">:</span> 30%<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å¤‡æ³¨ï¼š<br><br>å…¶ä»–æœåŠ¡å™¨é…ç½®ä¸€è‡´<br><br>JDKä¸‹è½½åœ°å€ï¼š<a href="https://download.oracle.com/otn/java/jdk/8u351-b10/10e8cce67c7843478f41411b7003171c/jdk-8u351-linux-x64.tar.gz?AuthParam=1670730205_7f2b9f799e119cf35d27add28a8187cf">jdk1.8</a><br><br>OPEN JDK9åŠä»¥åç‰ˆæœ¬ä¸‹è½½åœ°å€ï¼š<a href="https://jdk.java.net/archive/">JDK9åŠä»¥åç‰ˆæœ¬</a><br><br>Elasticsearchä¸‹è½½åœ°å€ï¼š<a href="https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-7.0.0-linux-x86_64.tar.gz">Elasticsearch7.0.0</a><br><br>ElasticStackæ‰€æœ‰è½¯ä»¶ä¸‹è½½åœ°å€ï¼š<a href="https://www.elastic.co/cn/downloads/past-releases#elasticsearch">Elastic Stackæ‰€æœ‰è½¯ä»¶</a></p></blockquote></li></ul><ol start="2"><li>ç³»ç»Ÿç¯å¢ƒå‡†å¤‡<blockquote><p>â—ï¸ Elasticsearchéƒ¨ç½²éœ€è¦åœ¨Linuxä¸­å•ç‹¬åˆ›å»ºä¸€ä¸ªç”¨æˆ·ä¾›å…¶ä½¿ç”¨</p></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># åˆ›å»ºç»„$ groupadd elastic# åˆ›å»ºç”¨æˆ·åŠè®¾ç½®å¯†ç  -gå°†æ–°å»ºç”¨æˆ·æ·»åŠ åˆ°æŒ‡å®šåˆ†ç»„ -pè®¾ç½®ç”¨æˆ·å¯†ç $ useradd elastic -g elastic -p elastic# ç»™ç›®å½•æ·»åŠ æƒé™$ chown -R elastic:elastic /opt/elastic# å…³é—­ç³»ç»Ÿswapäº¤æ¢ï¼Œå‘ç”Ÿç³»ç»Ÿswappingçš„æ—¶å€™ESèŠ‚ç‚¹çš„æ€§èƒ½ä¼šéå¸¸å·®ï¼Œä¹Ÿä¼šå½±å“èŠ‚ç‚¹çš„ç¨³å®šæ€§ã€‚æ‰€ä»¥è¦ä¸æƒœä¸€åˆ‡ä»£ä»·æ¥é¿å…swappingã€‚swappingä¼šå¯¼è‡´Java GCçš„å‘¨æœŸå»¶è¿Ÿä»æ¯«ç§’çº§æ¶åŒ–åˆ°åˆ†é’Ÿï¼Œæ›´ä¸¥é‡çš„æ˜¯ä¼šå¼•èµ·èŠ‚ç‚¹å“åº”å»¶è¿Ÿç”šè‡³è„±ç¦»é›†ç¾¤$ swapoff -a# è®¾ç½®æ“ä½œç³»ç»Ÿå¯ä»¥æ— é™åˆ¶åˆ†é…å†…å­˜ä¸€ä¸ªè¿›ç¨‹$ ulimit -l unlimited# é…ç½®é™åˆ¶$ vim /etc/security/limits.conf# allow user 'XXX' mlockall* soft nofile 65536* hard nofile 65536* soft nproc 32000* hard nproc 32000elastic soft memlock unlimitedelastic hard memlock unlimited# åˆ‡æ¢ç”¨æˆ·$ su elastic# å¯åŠ¨elastisearch$ /opt/elastic/node-01/elasticsearch7.0.0/bin/elasticsearch -d$ /opt/elastic/node-02/elasticsearch7.0.0/bin/elasticsearch -d$ /opt/elastic/node-03/elasticsearch7.0.0/bin/elasticsearch -d$ /opt/elastic/node-04/elasticsearch7.0.0/bin/elasticsearch -d$ /opt/elastic/node-05/elasticsearch7.0.0/bin/elasticsearch -d$ /opt/elastic/node-client/elasticsearch7.0.0/bin/elasticsearch -d<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> å¤§æ•°æ® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> elasticsearch </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kafkaé›†ç¾¤å®‰è£…ä¸éƒ¨ç½²</title>
      <link href="//2023/01/25/kafka-install/"/>
      <url>//2023/01/25/kafka-install/</url>
      
        <content type="html"><![CDATA[<h2 id="kafkaé›†ç¾¤å®‰è£…ä¸éƒ¨ç½²"><a href="#kafkaé›†ç¾¤å®‰è£…ä¸éƒ¨ç½²" class="headerlink" title="kafkaé›†ç¾¤å®‰è£…ä¸éƒ¨ç½²"></a>kafkaé›†ç¾¤å®‰è£…ä¸éƒ¨ç½²</h2><h3 id="ä¸€ã€ç¯å¢ƒå‡†å¤‡"><a href="#ä¸€ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="ä¸€ã€ç¯å¢ƒå‡†å¤‡"></a>ä¸€ã€ç¯å¢ƒå‡†å¤‡</h3><ol><li><p>ç‰©ç†æœºé…ç½®</p><table><thead><tr><th>æ•°é‡</th><th>é…ç½®</th><th>æ“ä½œç³»ç»Ÿ</th><th>IPåœ°å€</th></tr></thead><tbody><tr><td>3</td><td>å¤„ç†å™¨ï¼š4æ ¸å¿ƒ<br> å†…å­˜ï¼š16GB <br>ç³»ç»Ÿç›˜ï¼š100GB</td><td>Linux CentOS 7.5</td><td>192.168.70.130<br>192.168.70.131<br>192.168.70.132</td></tr></tbody></table></li><li><p>hostsæ–‡ä»¶ä¿®æ”¹</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># éƒ¨ç½²zké›†ç¾¤å’Œkafkaé›†ç¾¤ï¼ŒIPæ˜ å°„</span><span class="token comment"># æ·»åŠ IPå…³ç³»æ˜ å°„ </span>$ <span class="token builtin class-name">echo</span> <span class="token string">'192.168.70.130 kafka-zk01'</span> <span class="token operator">&gt;&gt;</span> /etc/hosts$ <span class="token builtin class-name">echo</span> <span class="token string">'192.168.70.131 kafka-zk02'</span> <span class="token operator">&gt;&gt;</span> /etc/hosts$ <span class="token builtin class-name">echo</span> <span class="token string">'192.168.70.132 kafka-zk03'</span> <span class="token operator">&gt;&gt;</span> /etc/hosts<span class="token comment"># æŸ¥çœ‹æ·»åŠ æ˜ å°„å†…å®¹</span>$ <span class="token function">cat</span> /etc/hosts<span class="token number">192.168</span>.70.130  kafka-zk01<span class="token number">192.168</span>.70.131  kafka-zk02<span class="token number">192.168</span>.70.132  kafka-zk03<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol><h3 id="äºŒã€é›†ç¾¤éƒ¨ç½²"><a href="#äºŒã€é›†ç¾¤éƒ¨ç½²" class="headerlink" title="äºŒã€é›†ç¾¤éƒ¨ç½²"></a>äºŒã€é›†ç¾¤éƒ¨ç½²</h3><ol><li><p>åŸºç¡€ç¯å¢ƒåˆå§‹åŒ–</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># åˆ›å»ºç›®å½•ç”¨äºä¸‹è½½æ–‡ä»¶ï¼Œåé¢æ–‡ä»¶ä¸‹è½½å‡åœ¨æ­¤ç›®å½•ä¸‹ï¼Œå¯ä»¥æ ¹æ®è‡ªå·±ä¹ æƒ¯æ“ä½œ</span>$ <span class="token function">mkdir</span> -p /home/software$ <span class="token builtin class-name">cd</span> /home/software<span class="token comment"># å®‰è£…JDK</span><span class="token comment"># ä¸‹è½½JDK</span>$ <span class="token function">wget</span> https://download.oracle.com/otn/java/jdk/8u351-b10/10e8cce67c7843478f41411b7003171c/jdk-8u351-linux-x64.tar.gz?AuthParam<span class="token operator">=</span>1670730205_7f2b9f799e119cf35d27add28a8187cf<span class="token comment"># è§£å‹jdkæ–‡ä»¶ tar</span>$ <span class="token function">tar</span> -zxvf jdk-8u351-linux-x64.tar.gz<span class="token comment"># æŸ¥çœ‹å½“å‰æœºå™¨æ˜¯å¦å®‰è£…è¿‡jdk</span>$ <span class="token function">rpm</span> -qa <span class="token operator">|</span><span class="token function">grep</span> java<span class="token comment"># åˆ é™¤ä»¥javaå¼€å¤´çš„æ–‡ä»¶</span>$ <span class="token function">rpm</span> -e --nodeps java*<span class="token comment"># åˆ é™¤å®Œæ¯•åå¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤ç¡®è®¤æ˜¯å¦è¿˜å­˜åœ¨ï¼Œå¦‚æœæç¤ºcommandæ‰¾ä¸åˆ°ï¼Œè¯´æ˜ç§»é™¤å®Œæˆ</span>$ java -version<span class="token comment"># é…ç½®JDK</span>$ <span class="token function">vim</span> /etc/profile<span class="token comment"># åœ¨æœ€åä¸€è¡Œæ·»åŠ å¦‚ä¸‹å†…å®¹</span><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/home/local/java/jdk1.8.0_271<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token variable">$JAVA_HOME</span>/bin:<span class="token environment constant">$PATH</span><span class="token builtin class-name">export</span> <span class="token assign-left variable">CLASSPATH</span><span class="token operator">=</span>.:<span class="token variable">$JAVA_HOME</span>/lib/dt.jar:<span class="token variable">$JAVA_HOME</span>/lib/tools.jar<span class="token comment"># ä¿å­˜å†…å®¹</span>æŒ‰ä¸‹escé”®ï¼Œæ“ä½œ:wqä¿å­˜æ–‡ä»¶å†…å®¹<span class="token comment"># é‡æ–°åŠ è½½æ–‡ä»¶ï¼Œä½¿å…¶ç”Ÿæ•ˆ</span>$ <span class="token builtin class-name">source</span> /etc/profile<span class="token comment"># éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸï¼Œå¦‚æœå‘½ä»¤æ­£å¸¸è¯´æ˜å·²ç»æˆåŠŸ</span>$ java -version <span class="token comment"># åˆ›å»ºkafkaé›†ç¾¤éƒ¨ç½²ç›®å½•</span>$ <span class="token function">mkdir</span> /opt/kafka<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>å®‰è£…Zookeeper</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># ä¸‹è½½zookeeper</span>$ <span class="token function">wget</span> https://dlcdn.apache.org/zookeeper/zookeeper-3.8.0/apache-zookeeper-3.8.0-bin.tar.gz<span class="token comment"># è§£å‹zookeeper</span>$ <span class="token function">tar</span> -xvzf apache-zookeeper-3.8.0-bin.tar.gz<span class="token comment"># å°†zookeeperç§»åŠ¨åˆ°åˆšåˆšåˆ›å»ºçš„ç›®å½•/opt/kafka</span>$ <span class="token function">mv</span> ./apache-zookeeper-3.8.0-bin /opt/kafka/zookeeper-3.8.0<span class="token comment"># åˆ›å»ºæ•°æ®ç›®å½•</span>$ <span class="token function">mkdir</span> /opt/kafka/zookeeper-data<span class="token comment"># åˆ›å»ºmyidæ–‡ä»¶</span>$ <span class="token function">touch</span>  /opt/kafka/zookeeper-data/myid<span class="token comment"># æ•°æ®ç›®å½•å†™å…¥zookeeperçš„IDï¼Œå¦‚æœæ˜¯ç¬¬ä¸€å°æœºå™¨åˆ™åœ¨è¿™é‡Œå†™1ï¼Œåç»­æœºå™¨ä¾æ¬¡æŒ‰é¡ºåºå†™å…¥2...</span><span class="token builtin class-name">echo</span> <span class="token string">"1"</span> <span class="token operator">&gt;</span> /opt/kafka/zookeeper-data/myid<span class="token comment"># æŸ¥çœ‹myidæ–‡ä»¶ä¸­çš„æ•°æ®</span><span class="token function">cat</span> /opt/kafka/zookeeper-data/myid<span class="token number">1</span><span class="token comment"># è¿›å…¥zookeeperé…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•</span>$ <span class="token builtin class-name">cd</span> /opt/kafka/zookeeper-3.8.0/conf$ <span class="token function">cp</span> zoo_sample.cfg zoo.cfg<span class="token comment"># ä¿®æ”¹zoo.cfgé…ç½®æ–‡ä»¶</span><span class="token comment"># ä¿®æ”¹dataDirçš„é…ç½®ï¼Œå°†å…¶è®¾ç½®ä¸ºzkçš„æ•°æ®åœ°å€</span><span class="token assign-left variable">dataDir</span><span class="token operator">=</span>/opt/kafka/zookeeper-data<span class="token comment"># å¢åŠ ZKé›†ç¾¤ä¹‹é—´çš„äº¤äº’é…ç½®ã€‚æ­¤å¤„server.1åâ¾¯çš„1ï¼Œå¿…é¡»è¦å’Œmyidä¸­çš„è¾“â¼Šæ•°å­—å¯¹åº”ä¸Šã€‚</span>server.1<span class="token operator">=</span>kafka-zk01:2888:3888server.2<span class="token operator">=</span>kafka-zk02:2888:3888server.3<span class="token operator">=</span>kafka-zk03:2888:3888<span class="token comment"># è¿›å…¥zookeeperçš„binç›®å½•</span>$ <span class="token builtin class-name">cd</span> /opt/kafka/zookeeper-3.8.0/bin<span class="token comment"># å¯åŠ¨å‘½ä»¤</span>$ ./zkServer.sh start<span class="token comment"># åœæ­¢å‘½ä»¤</span>$ ./zkServer.sh stop<span class="token comment"># æŸ¥çœ‹çŠ¶æ€å‘½ä»¤,ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹</span>$ ./zkServer.sh statusZooKeeper JMX enabled by defaultUsing config: /opt/kafka/zookeeper-3.8.0/bin/<span class="token punctuation">..</span>/conf/zoo.cfgMode: leader<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å¤‡æ³¨ï¼šæ­¤å¤„ä¸ºé›†ç¾¤éƒ¨ç½²ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œæ³¨æ„myidæ–‡ä»¶çš„ä¿®æ”¹</p></blockquote></li><li><p>å®‰è£…Kafka</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># ä¸‹è½½kafka</span>$ <span class="token function">wget</span> https://downloads.apache.org/kafka/3.3.1/kafka_2.12-3.3.1.tgz<span class="token comment"># è§£å‹kafka</span>$ <span class="token function">tar</span> -xzf kafka_2.12-3.3.1.tgz<span class="token comment"># å°†kafkaç§»åŠ¨åˆ°åˆšåˆšåˆ›å»ºçš„ç›®å½•/opt/kafka</span>$ <span class="token function">mv</span> ./kafka_2.12-3.3.1 /opt/kafka/kafka_2.12-3.3.1<span class="token comment"># åˆ›å»ºæ•°æ®ç›®å½•</span>$ <span class="token function">mkdir</span> /opt/kafka/kafka-data<span class="token comment"># è¿›å…¥kafkaçš„é…ç½®æ–‡ä»¶æ‰€åœ¨ç›®å½•</span>$ <span class="token builtin class-name">cd</span> /opt/kafka/kafka_2.12-3.3.1/config<span class="token comment"># ä¿®æ”¹server.propertiesæ–‡ä»¶</span><span class="token comment"># ç¬¬â¼€å°æœºå™¨è®¾ç½®ä¸º1ï¼Œç¬¬â¼†å°è®¾ç½®ä¸º2ï¼Œä¾æ¬¡ç±»æ¨</span>broker.id<span class="token operator">=</span><span class="token number">1</span> <span class="token comment"># å…è®¸åˆ é™¤Topic</span>delete.topic.enable<span class="token operator">=</span>true <span class="token comment"># å…è®¸â¾ƒåŠ¨åˆ›å»ºTopicï¼Œå¦‚æœæ²¡æœ‰éƒ¨ç½²Kafkaç®¡æ§å¹³å°ï¼Œé‚£ä¹ˆå»ºè®®å¼€å¯Topicçš„â¾ƒåŠ¨åˆ›å»ºä»¥çœç•¥å•ç‹¬â¼¿åŠ¨åˆ›å»ºTopicçš„éº»çƒ¦è¿‡ç¨‹</span>auto.create.topics.enable<span class="token operator">=</span>true <span class="token comment"># è¯¥æœºå™¨çš„æœåŠ¡åœ°å€,å³å½“å‰æœåŠ¡å™¨åœ°å€</span><span class="token assign-left variable">listeners</span><span class="token operator">=</span>PLAINTEXT://kafka-zk01:9092 <span class="token comment"># æ•°æ®â½¬å½•ï¼Œå¯â¾ƒå®šä¹‰ä¿®æ”¹</span>log.dirs<span class="token operator">=</span>/home/kafka/kafka-data <span class="token comment"># å¦‚æœå¼€å¯äº†Topicâ¾ƒåŠ¨åˆ›å»ºï¼ŒåŒæ—¶æœºå™¨&gt;=3å°ï¼Œé‚£ä¹ˆåˆ†åŒºæ•°å»ºè®®é»˜è®¤3ä¸ªï¼Œå‰¯æœ¬å»ºè®®2ä¸ªï¼Œä»¥ä¿è¯å¯é æ€§</span>num.partitions<span class="token operator">=</span><span class="token number">3</span>default.replication.factor<span class="token operator">=</span><span class="token number">2</span><span class="token comment"># zookeeperé›†ç¾¤åœ°å€ åâ¾¯/kafka_3_4_1 æ ‡è¯†çš„æ˜¯Zookeeperä¸­çš„ä¸‹â¼€å±‚â½¬å½•kafka_3_4_1ä½œä¸ºkafkaçš„å…ƒä¿¡æ¯å­˜å‚¨åœ°</span>zookeeper.connect<span class="token operator">=</span>kafka-zk01:2181,kafka-zk02:2181,kafka-zk03:2181/kafka_3_4_1<span class="token comment"># è¿›å…¥kafkaçš„binç›®å½•</span>$ <span class="token builtin class-name">cd</span> /opt/kafka/kafka_2.12-3.3.1/bin<span class="token comment"># å¯åŠ¨å‘½ä»¤</span>$ <span class="token function">nohup</span> ./kafka-server-start.sh <span class="token punctuation">..</span>/config/server.properties <span class="token operator">&gt;</span> /dev/null <span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span><span class="token file-descriptor important">&amp;1</span> <span class="token operator">&amp;</span><span class="token comment"># æ£€æŸ¥æ˜¯å¦æ­£å¸¸å¯åŠ¨ï¼Œé€šè¿‡æ£€æŸ¥../logs/server.logâ¾¥â¾¯æ˜¯å¦æœ‰startedâ½‡å¿—ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œé‚£ä¹ˆå°±å¯åŠ¨æˆåŠŸäº†</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>å¤‡æ³¨ï¼šæ­¤å¤„ä¸ºé›†ç¾¤éƒ¨ç½²ï¼Œé‡å¤ä»¥ä¸Šæ­¥éª¤ï¼Œæ³¨æ„é…ç½®æ–‡ä»¶ä¸­çš„broker.idä»¥åŠlistenerséœ€è¦è°ƒæ•´</p></blockquote></li><li><p>éªŒè¯</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># è¿›å…¥kafkaçš„binç›®å½•</span>$ <span class="token builtin class-name">cd</span> /opt/kafka/kafka_2.12-3.3.1/bin<span class="token comment"># ç”Ÿäº§æ¶ˆæ¯æµ‹è¯•</span>$ ./kafka-console-producer.sh --bootstrap-server kafka-zk01:9092,kafka-zk02:9092,kafka-zk03:9092 --topic <span class="token builtin class-name">test</span><span class="token comment"># æ¶ˆè´¹æ¶ˆæ¯æµ‹è¯•</span>$ ./kafka-console-consumer.sh --bootstrap-server kafka-zk01:9092,kafka-zk02:9092,kafka-zk03:9092 --topic <span class="token builtin class-name">test</span> --group consume_test --property enable.auto.commit<span class="token operator">=</span>true<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ol>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kafka </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>RedisåŸºç¡€</title>
      <link href="//2021/11/08/redis/"/>
      <url>//2021/11/08/redis/</url>
      
        <content type="html"><![CDATA[<h2 id="RedisåŸºç¡€"><a href="#RedisåŸºç¡€" class="headerlink" title="RedisåŸºç¡€"></a>RedisåŸºç¡€</h2><p><a href="http://redisdoc.com/">Rediså­¦ä¹ å‚è€ƒç½‘ç«™</a></p><h4 id="1-æ•°æ®ç±»å‹åŠåŸºæœ¬æ“ä½œæŒ‡ä»¤"><a href="#1-æ•°æ®ç±»å‹åŠåŸºæœ¬æ“ä½œæŒ‡ä»¤" class="headerlink" title="1. æ•°æ®ç±»å‹åŠåŸºæœ¬æ“ä½œæŒ‡ä»¤"></a>1. æ•°æ®ç±»å‹åŠåŸºæœ¬æ“ä½œæŒ‡ä»¤</h4><blockquote><ul><li>String </li><li>Hash</li><li>List</li><li>Set</li><li>Zset</li></ul></blockquote><ul><li><p>Stringæ“ä½œ</p><ul><li><p>åŸºç¡€æŒ‡ä»¤</p><ul><li><a href="http://redisdoc.com/string/set.html">SET</a></li><li><a href="http://redisdoc.com/string/setnx.html">SETNX</a></li><li><a href="http://redisdoc.com/string/setex.html">SETEX</a></li><li><a href="http://redisdoc.com/string/psetex.html">PSETEX</a></li><li><a href="http://redisdoc.com/string/get.html">GET</a></li><li><a href="http://redisdoc.com/string/getset.html">GETSET</a></li><li><a href="http://redisdoc.com/string/strlen.html">STRLEN</a></li><li><a href="http://redisdoc.com/string/append.html">APPEND</a></li><li><a href="http://redisdoc.com/string/setrange.html">SETRANGE</a></li><li><a href="http://redisdoc.com/string/getrange.html">GETRANGE</a></li><li><a href="http://redisdoc.com/string/incr.html">INCR</a></li><li><a href="http://redisdoc.com/string/incrby.html">INCRBY</a></li><li><a href="http://redisdoc.com/string/incrbyfloat.html">INCRBYFLOAT</a></li><li><a href="http://redisdoc.com/string/decr.html">DECR</a></li><li><a href="http://redisdoc.com/string/decrby.html">DECRBY</a></li><li><a href="http://redisdoc.com/string/mset.html">MSET</a></li><li><a href="http://redisdoc.com/string/msetnx.html">MSETNX</a></li><li><a href="http://redisdoc.com/string/mget.html">MGET</a></li></ul></li><li><p>incræŒ‡ä»¤</p><ul><li><p>ç”¨é€”ï¼šåˆ†å¸ƒå¼IDã€è®¡æ•°å™¨</p></li><li><p>setnx å¦‚æœä¸å­˜åœ¨åˆ™å­˜å…¥ï¼Œå¦åˆ™å­˜å…¥å¤±è´¥</p><ul><li>ç”¨é€”ï¼šé”ï¼ˆäº’æ–¥æ ‡å¿—ï¼‰</li><li>é—®é¢˜ï¼šå¦‚æœå¹¶å‘äº†æ€ä¹ˆåŠï¼Ÿä¸ä¼šå­˜åœ¨å¹¶å‘ï¼Œå› ä¸ºå‘½ä»¤æ‰§è¡Œæ˜¯å•çº¿ç¨‹ï¼Œåªè¦èƒ½ä¿è¯æŠ¢æ ‡è®°</li></ul></li></ul></li><li><p>åœºæ™¯</p><ul><li>ç¼“å­˜ï¼Œå­˜å‚¨session</li><li>åˆ†å¸ƒå¼é”ï¼Œå•çº¿ç¨‹</li><li>è®¡æ•°å™¨ï¼Œåˆ†å¸ƒå¼ID</li><li>é—®é¢˜ï¼šæ­»é”ï¼ˆé” å¿…é¡»å¾—æœ‰ æœ‰æ•ˆæœŸï¼‰</li></ul>  <pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">// ä¼ªä»£ç </span>      <span class="token keyword">if</span><span class="token punctuation">(</span>set<span class="token punctuation">)</span> <span class="token comment">// æ‹¿åˆ°é”</span>     <span class="token punctuation">{</span>       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token comment">// ç³»ç»ŸæŒ‚äº†</span>       <span class="token comment">// è®¾ç½®è¿‡æœŸæ—¶é—´ è¯¥å¤„é€»è¾‘ä¸ä¼šè¢«æ‰§è¡Œ</span>     <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p>Hashæ“ä½œ</p><ul><li><p>åŸºç¡€æŒ‡ä»¤</p><ul><li><a href="http://redisdoc.com/hash/hset.html">HSET</a></li><li><a href="http://redisdoc.com/hash/hsetnx.html">HSETNX</a></li><li><a href="http://redisdoc.com/hash/hget.html">HGET</a></li><li><a href="http://redisdoc.com/hash/hexists.html">HEXISTS</a></li><li><a href="http://redisdoc.com/hash/hdel.html">HDEL</a></li><li><a href="http://redisdoc.com/hash/hlen.html">HLEN</a></li><li><a href="http://redisdoc.com/hash/hstrlen.html">HSTRLEN</a></li><li><a href="http://redisdoc.com/hash/hincrby.html">HINCRBY</a></li><li><a href="http://redisdoc.com/hash/hincrbyfloat.html">HINCRBYFLOAT</a></li><li><a href="http://redisdoc.com/hash/hmset.html">HMSET</a></li><li><a href="http://redisdoc.com/hash/hmget.html">HMGET</a></li><li><a href="http://redisdoc.com/hash/hkeys.html">HKEYS</a></li><li><a href="http://redisdoc.com/hash/hvals.html">HVALS</a></li><li><a href="http://redisdoc.com/hash/hgetall.html">HGETALL</a></li><li><a href="http://redisdoc.com/hash/hscan.html">HSCAN</a></li></ul></li><li><p>ç‰¹ç‚¹ï¼šç»“æ„å‹æ•°æ®ï¼Œç»Ÿè®¡æ•°æ®</p><p>å•†å“ æµè§ˆæ•°ã€ä¸‹å•æ•°</p></li><li><p>åœºæ™¯</p><ul><li><p>è´­ç‰©è½¦</p></li><li><p>å¯ä»¥ä½œä¸ºåˆ†å¸ƒå¼é”ï¼Œå¹¶ä¸”å¯ä»¥åšçš„æ›´å¥½</p></li><li><p>èƒ½åšé‡å…¥é”ï¼Œé‡å…¥ï¼šåŒä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿå¤šæ¬¡åŠ é” , ç±»ä¼¼å¤§é—¨ä¸Šé”ï¼Œä¸Šäº†å¤šæŠŠé”ï¼Œåªæœ‰è‡ªå·±æ‰æœ‰é’¥åŒ™è§£é”</p><p>å¿…è¦å› ç´ ï¼š1.äº’æ–¥ï¼ˆkeyï¼‰ 2.çº¿ç¨‹IDï¼ˆfileï¼‰ 3.é‡å…¥æ¬¡æ•°ï¼ˆvalueï¼‰</p></li></ul></li></ul></li><li><p>List æ“ä½œ</p><ul><li>åŸºç¡€æŒ‡ä»¤<ul><li><a href="http://redisdoc.com/list/lpush.html">LPUSH</a></li><li><a href="http://redisdoc.com/list/lpushx.html">LPUSHX</a></li><li><a href="http://redisdoc.com/list/rpush.html">RPUSH</a></li><li><a href="http://redisdoc.com/list/rpushx.html">RPUSHX</a></li><li><a href="http://redisdoc.com/list/lpop.html">LPOP</a></li><li><a href="http://redisdoc.com/list/rpop.html">RPOP</a></li><li><a href="http://redisdoc.com/list/rpoplpush.html">RPOPLPUSH</a></li><li><a href="http://redisdoc.com/list/lrem.html">LREM</a></li><li><a href="http://redisdoc.com/list/llen.html">LLEN</a></li><li><a href="http://redisdoc.com/list/lindex.html">LINDEX</a></li><li><a href="http://redisdoc.com/list/linsert.html">LINSERT</a></li><li><a href="http://redisdoc.com/list/lset.html">LSET</a></li><li><a href="http://redisdoc.com/list/lrange.html">LRANGE</a></li><li><a href="http://redisdoc.com/list/ltrim.html">LTRIM</a></li><li><a href="http://redisdoc.com/list/blpop.html">BLPOP</a></li><li><a href="http://redisdoc.com/list/brpop.html">BRPOP</a></li><li><a href="http://redisdoc.com/list/brpoplpush.html">BRPOPLPUSH</a></li></ul></li><li>ç‰¹ç‚¹ï¼šæœ‰åºçš„ã€å…ƒç´ å¯ä»¥é‡å¤çš„é›†åˆ</li><li>åœºæ™¯ï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼ˆæ¯”å¦‚ï¼šblpopï¼‰ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œä½œä¸ºæ¶ˆæ¯é˜Ÿåˆ—æ²¡æœ‰ä»»ä½•å›åº”ï¼ŒRedis APæ¨¡å¼ï¼Œæ•°æ®å¯é æ€§ä¸</li></ul><blockquote><p>è¯´æ˜ï¼š</p><p>APæ¨¡å¼ï¼šä¼˜å…ˆä¿è¯å¯ç”¨æ€§</p><p>CPæ¨¡å¼ï¼šä¼˜å…ˆä¿è¯æ•°æ®ä¸€è‡´æ€§</p><p>ä¸€è‡´æ€§(Consistency) (ç­‰åŒäºæ‰€æœ‰èŠ‚ç‚¹è®¿é—®åŒä¸€ä»½æœ€æ–°çš„æ•°æ®å‰¯æœ¬)<br>å¯ç”¨æ€§(Availability)(æ¯æ¬¡è¯·æ±‚éƒ½èƒ½è·å–åˆ°éé”™çš„å“åº”â€”â€”ä½†æ˜¯ä¸ä¿è¯è·å–çš„æ•°æ®ä¸ºæœ€æ–°æ•°æ®)<br>åˆ†åŒºå®¹é”™æ€§(Partition tolerance)(ä»¥å®é™…æ•ˆæœè€Œè¨€ï¼Œåˆ†åŒºç›¸å½“äºå¯¹é€šä¿¡çš„æ—¶é™è¦æ±‚ã€‚ç³»ç»Ÿå¦‚æœä¸èƒ½åœ¨æ—¶é™å†…è¾¾æˆæ•°æ®ä¸€è‡´æ€§ï¼Œå°±æ„å‘³ç€å‘ç”Ÿäº†åˆ†åŒºçš„æƒ…å†µï¼Œå¿…é¡»å°±å½“å‰æ“ä½œåœ¨Cå’ŒAä¹‹é—´åšå‡ºé€‰æ‹©)</p></blockquote></li><li><p>Setæ“ä½œ</p><ul><li>åŸºç¡€æŒ‡ä»¤<ul><li><a href="http://redisdoc.com/set/sadd.html">SADD</a></li><li><a href="http://redisdoc.com/set/sismember.html">SISMEMBER</a></li><li><a href="http://redisdoc.com/set/spop.html">SPOP</a></li><li><a href="http://redisdoc.com/set/srandmember.html">SRANDMEMBER</a></li><li><a href="http://redisdoc.com/set/srem.html">SREM</a></li><li><a href="http://redisdoc.com/set/smove.html">SMOVE</a></li><li><a href="http://redisdoc.com/set/scard.html">SCARD</a></li><li><a href="http://redisdoc.com/set/smembers.html">SMEMBERS</a></li><li><a href="http://redisdoc.com/set/sscan.html">SSCAN</a></li><li><a href="http://redisdoc.com/set/sinter.html">SINTER</a></li><li><a href="http://redisdoc.com/set/sinterstore.html">SINTERSTORE</a></li><li><a href="http://redisdoc.com/set/sunion.html">SUNION</a></li><li><a href="http://redisdoc.com/set/sunionstore.html">SUNIONSTORE</a></li><li><a href="http://redisdoc.com/set/sdiff.html">SDIFF</a></li><li><a href="http://redisdoc.com/set/sdiffstore.html">SDIFFSTORE</a></li></ul></li><li>ç‰¹ç‚¹ï¼šæ— åºçš„ã€å…ƒç´ ä¸å¯ä»¥é‡å¤çš„é›†åˆ</li><li>åœºæ™¯ï¼š<ul><li>æŠ½å¥– éšæœºå¼¹å‡ºï¼ˆç§»é™¤[SPOP]å’Œä¸ç§»é™¤å¥–æ± [SRANDMEMBER]ï¼‰</li><li>äº¤é›†ã€å·®é›†ã€å¹¶é›†</li><li>ç‚¹èµ</li></ul></li></ul></li><li><p>ZSetæ“ä½œ</p><ul><li>åŸºç¡€æŒ‡ä»¤<ul><li><a href="http://redisdoc.com/sorted_set/zadd.html">ZADD</a></li><li><a href="http://redisdoc.com/sorted_set/zscore.html">ZSCORE</a></li><li><a href="http://redisdoc.com/sorted_set/zincrby.html">ZINCRBY</a></li><li><a href="http://redisdoc.com/sorted_set/zcard.html">ZCARD</a></li><li><a href="http://redisdoc.com/sorted_set/zcount.html">ZCOUNT</a></li><li><a href="http://redisdoc.com/sorted_set/zrange.html">ZRANGE</a></li><li><a href="http://redisdoc.com/sorted_set/zrevrange.html">ZREVRANGE</a></li><li><a href="http://redisdoc.com/sorted_set/zrangebyscore.html">ZRANGEBYSCORE</a></li><li><a href="http://redisdoc.com/sorted_set/zrevrangebyscore.html">ZREVRANGEBYSCORE</a></li><li><a href="http://redisdoc.com/sorted_set/zrank.html">ZRANK</a></li><li><a href="http://redisdoc.com/sorted_set/zrevrank.html">ZREVRANK</a></li><li><a href="http://redisdoc.com/sorted_set/zrem.html">ZREM</a></li><li><a href="http://redisdoc.com/sorted_set/zremrangebyrank.html">ZREMRANGEBYRANK</a></li><li><a href="http://redisdoc.com/sorted_set/zremrangebyscore.html">ZREMRANGEBYSCORE</a></li><li><a href="http://redisdoc.com/sorted_set/zrangebylex.html">ZRANGEBYLEX</a></li><li><a href="http://redisdoc.com/sorted_set/zlexcount.html">ZLEXCOUNT</a></li><li><a href="http://redisdoc.com/sorted_set/zremrangebylex.html">ZREMRANGEBYLEX</a></li><li><a href="http://redisdoc.com/sorted_set/zscan.html">ZSCAN</a></li><li><a href="http://redisdoc.com/sorted_set/zunionstore.html">ZUNIONSTORE</a></li><li><a href="http://redisdoc.com/sorted_set/zinterstore.html">ZINTERSTORE</a></li></ul></li><li>ç‰¹ç‚¹ï¼šæœ‰åºçš„ã€å…ƒç´ ä¸å¯ä»¥é‡å¤çš„é›†åˆ</li><li>æ’åºï¼šå¦‚æœscoreç›¸åŒï¼Œç”¨keyçš„ASCIIç æ’åº</li><li>åœºæ™¯ï¼šæ’è¡Œæ¦œ</li></ul></li></ul>]]></content>
      
      
      <categories>
          
          <category> ä¸­é—´ä»¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker Desktop(WSL2)ä¿®æ”¹é•œåƒå­˜å‚¨ä½ç½®</title>
      <link href="//2021/10/24/windows-wsl-partition/"/>
      <url>//2021/10/24/windows-wsl-partition/</url>
      
        <content type="html"><![CDATA[<h2 id="Docker-Desktop-WSL2-ä¿®æ”¹é•œåƒå­˜å‚¨ä½ç½®"><a href="#Docker-Desktop-WSL2-ä¿®æ”¹é•œåƒå­˜å‚¨ä½ç½®" class="headerlink" title="Docker Desktop(WSL2)ä¿®æ”¹é•œåƒå­˜å‚¨ä½ç½®"></a>Docker Desktop(WSL2)ä¿®æ”¹é•œåƒå­˜å‚¨ä½ç½®</h2><p>æ­¤å¤„æˆ‘ä½¿ç”¨çš„æ˜¯WSL2çš„ç‰ˆæœ¬ï¼Œå› æ­¤docker desktopåœ¨å®‰è£…çš„æ—¶å€™åˆ›å»ºä¸¤ä¸ªwslå­ç³»ç»Ÿï¼Œåˆ†åˆ«ä¸ºdocker-desktopå’Œdocker-desktop-data</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># æŸ¥çœ‹å·²åˆ›å»ºå­ç³»ç»Ÿ</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>xxxxx<span class="token operator">&gt;</span>wsl -l -v --all  NAME                   STATE           VERSION* docker-desktop         Running         <span class="token number">2</span>  docker-desktop-data    Running         <span class="token number">2</span><span class="token comment"># ç«‹å³ç»ˆæ­¢æ‰€æœ‰æ­£åœ¨è¿è¡Œçš„å‘è¡Œç‰ˆ</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>xxxxx<span class="token operator">&gt;</span>wsl --shutdown<span class="token comment"># å¯¼å‡ºwslå­ç³»ç»Ÿé•œåƒ</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>xxxxx<span class="token operator">&gt;</span>wsl --export docker-desktop I:<span class="token punctuation">\</span>docker<span class="token punctuation">\</span>wsl<span class="token punctuation">\</span>docker-desktop<span class="token punctuation">\</span>docker-desktop.tarC:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>xxxxx<span class="token operator">&gt;</span>wsl --export docker-desktop-data I:<span class="token punctuation">\</span>docker<span class="token punctuation">\</span>wsl<span class="token punctuation">\</span>docker-desktop-data<span class="token punctuation">\</span>docker-desktop-data.tar<span class="token comment"># åˆ é™¤ç°æœ‰çš„wslå­ç³»ç»Ÿ</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>xxxxx<span class="token operator">&gt;</span>wsl --unregister docker-desktopC:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>xxxxx<span class="token operator">&gt;</span>wsl --unregister docker-desktop-data<span class="token comment"># é‡æ–°åˆ›å»ºwslå­ç³»ç»Ÿ</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>xxxxx<span class="token operator">&gt;</span>wsl --import docker-desktop I:<span class="token punctuation">\</span>docker<span class="token punctuation">\</span>wsl<span class="token punctuation">\</span>docker-desktop I:<span class="token punctuation">\</span>docker<span class="token punctuation">\</span>wsl<span class="token punctuation">\</span>docker-desktop<span class="token punctuation">\</span>docker-desktop.tar --version <span class="token number">2</span>C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>xxxxx<span class="token operator">&gt;</span>wsl --import docker-desktop-data I:<span class="token punctuation">\</span>docker<span class="token punctuation">\</span>wsl<span class="token punctuation">\</span>docker-desktop-data I:<span class="token punctuation">\</span>docker<span class="token punctuation">\</span>wsl<span class="token punctuation">\</span>docker-desktop-data<span class="token punctuation">\</span>docker-desktop-data.tar --version <span class="token number">2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>è¯´æ˜ï¼ˆè¿™ä¸¤ä¸ªwslå­ç³»ç»Ÿé»˜è®¤å­˜æ”¾åœ¨ç³»ç»Ÿç›˜ï¼‰ï¼š</p><p>é»˜è®¤å­˜å‚¨ä½ç½®ï¼šC:\Users\xxxxx\AppData\Local\Docker\wsl</p><p>docker-desktopï¼šå­˜æ”¾ç¨‹åº</p><p>docker-desktop-dataï¼šå­˜æ”¾é•œåƒ</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸºäºDockerçš„Redisé›†ç¾¤æ­å»º</title>
      <link href="//2021/06/26/docker-redis-cluster/"/>
      <url>//2021/06/26/docker-redis-cluster/</url>
      
        <content type="html"><![CDATA[<h2 id="åŸºäºDockerçš„Redisé›†ç¾¤æ­å»º"><a href="#åŸºäºDockerçš„Redisé›†ç¾¤æ­å»º" class="headerlink" title="åŸºäºDockerçš„Redisé›†ç¾¤æ­å»º"></a>åŸºäºDockerçš„Redisé›†ç¾¤æ­å»º</h2><h4 id="1-æ‹‰å–é•œåƒ"><a href="#1-æ‹‰å–é•œåƒ" class="headerlink" title="1. æ‹‰å–é•œåƒ"></a>1. æ‹‰å–é•œåƒ</h4><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ docker pull redis:6.2.4<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id=""><a href="#" class="headerlink" title=""></a><img src="https://github.com/Nicholas2015/image/tree/master/redis/image-20210626214403717.png" alt="image-20210626214403717"></h4><h4 id="2-åˆ›å»ºRediså®¹å™¨"><a href="#2-åˆ›å»ºRediså®¹å™¨" class="headerlink" title="2.åˆ›å»ºRediså®¹å™¨"></a>2.åˆ›å»ºRediså®¹å™¨</h4><blockquote><p>åˆ›å»ºä¸‰ä¸ªRediså®¹å™¨ï¼š</p><ul><li>redis-node01:6379</li><li>redis-node02:6380</li><li>redis-node03:6380</li></ul></blockquote><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ docker create --name redis-node01 -v /data/redis-data/node1:/data -p 6379:6379 redis:6.2.4 --cluster-enabled yes --cluster-config-file redis-node01.conf$ docker create --name redis-node02 -v /data/redis-data/node2:/data -p 6380:6379 redis:6.2.4 --cluster-enabled yes --cluster-config-file redis-node02.conf$ docker create --name redis-node03 -v /data/redis-data/node3:/data -p 6381:6379 redis:6.2.4 --cluster-enabled yes --cluster-config-file redis-node03.conf<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/Nicholas2015/image/tree/master/redis/image-20210626214440775.png" alt="image-20210626214440775"></p><h4 id="3-å¯åŠ¨Redisé›†ç¾¤"><a href="#3-å¯åŠ¨Redisé›†ç¾¤" class="headerlink" title="3. å¯åŠ¨Redisé›†ç¾¤"></a>3. å¯åŠ¨Redisé›†ç¾¤</h4><ul><li><p>å¯åŠ¨å®¹å™¨</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ docker start redis-node01 redis-node02 redis-node03<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/Nicholas2015/image/tree/master/redis/image-20210626214325367.png" alt="image-20210626214325367"></p></li><li><p>æ£€æŸ¥å®¹å™¨å¯åŠ¨æƒ…å†µ</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ docker ps -a<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p><img src="https://github.com/Nicholas2015/image/tree/master/redis/image-20210626214301278.png" alt="image-20210626214301278"></p></li><li><p>æŸ¥çœ‹Redisåœ¨Dockerä¸­åˆ†é…çš„ip</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ docker inspect redis-node0$ docker inspect redis-node02$ docker inspect redis-node03<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/Nicholas2015/image/tree/master/redis/image-20210626214231630.png" alt="image-20210626214231630"></p></li><li><p>å¾—åˆ°ipåï¼Œåœ¨æŸä¸ªå®¹å™¨ä¸­è¿›è¡Œé›†ç¾¤ç»„å»º</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"># æ­¤å¤„è¿›å…¥node01$ docker exec -it redis-node01 /bin/bash# æ‰§è¡Œç»„å»ºé›†ç¾¤å‘½ä»¤ï¼ˆipæ ¹æ®è‡ªå·±çš„ä¿¡æ¯æ¥ç¡®å®šï¼‰$ redis-cli --cluster create 172.17.0.2:6379 172.17.0.3:6379 172.17.0.4:6379 --cluster-replicas 0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="https://github.com/Nicholas2015/image/tree/master/redis/image-20210626214558417.png" alt="image-20210626214558417"></p></li></ul>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitæœ¬åœ°é¡¹ç›®ä¸Šä¼ </title>
      <link href="//2021/06/26/git-local-project-upload/"/>
      <url>//2021/06/26/git-local-project-upload/</url>
      
        <content type="html"><![CDATA[<p>1ã€ï¼ˆå…ˆè¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ï¼‰é€šè¿‡å‘½ä»¤ git init æŠŠè¿™ä¸ªç›®å½•å˜æˆgitå¯ä»¥ç®¡ç†çš„ä»“åº“</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> init<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>2ã€æŠŠæ–‡ä»¶æ·»åŠ åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œä½¿ç”¨å‘½ä»¤ git add .æ·»åŠ åˆ°æš‚å­˜åŒºé‡Œé¢å»ï¼Œä¸è¦å¿˜è®°åé¢çš„å°æ•°ç‚¹â€œ.â€ï¼Œæ„ä¸ºæ·»åŠ æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>3ã€ç”¨å‘½ä»¤ git commitå‘Šè¯‰Gitï¼ŒæŠŠæ–‡ä»¶æäº¤åˆ°ä»“åº“ã€‚å¼•å·å†…ä¸ºæäº¤è¯´æ˜</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> commit -m <span class="token string">'first commit'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>4ã€å…³è”åˆ°è¿œç¨‹åº“</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> remote <span class="token function">add</span> origin ä½ çš„è¿œç¨‹åº“åœ°å€<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¦‚ï¼š</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> remote <span class="token function">add</span> origin https://github.com/xxx/xxx-demo.git<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>5ã€è·å–è¿œç¨‹åº“ä¸æœ¬åœ°åŒæ­¥åˆå¹¶ï¼ˆå¦‚æœè¿œç¨‹åº“ä¸ä¸ºç©ºå¿…é¡»åšè¿™ä¸€æ­¥ï¼Œå¦åˆ™åé¢çš„æäº¤ä¼šå¤±è´¥ï¼‰</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> pull --rebase origin master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>6ã€æŠŠæœ¬åœ°åº“çš„å†…å®¹æ¨é€åˆ°è¿œç¨‹ï¼Œä½¿ç”¨ git pushå‘½ä»¤ï¼Œå®é™…ä¸Šæ˜¯æŠŠå½“å‰åˆ†æ”¯masteræ¨é€åˆ°è¿œç¨‹ã€‚æ‰§è¡Œæ­¤å‘½ä»¤åä¼šè¦æ±‚è¾“å…¥ç”¨æˆ·åã€å¯†ç ï¼ŒéªŒè¯é€šè¿‡åå³å¼€å§‹ä¸Šä¼ ã€‚</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> push -u origin master<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>7ã€çŠ¶æ€æŸ¥è¯¢å‘½ä»¤</p><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">git</span> status<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>å¤‡ï¼šè¯¦ç»†è¯·å‚è€ƒ <a href="http://www.cnblogs.com/tugenhua0707/p/4050072.html">http://www.cnblogs.com/tugenhua0707/p/4050072.html</a></p><p> <img src="https://images2018.cnblogs.com/blog/359884/201711/359884-20171128123923050-1074438610.png" alt="img"></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>kubernetesç¯å¢ƒæ­å»º</title>
      <link href="//2021/06/26/kubernetes-install-01/"/>
      <url>//2021/06/26/kubernetes-install-01/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ç¯å¢ƒæ­å»ºå‰æœŸå‡†å¤‡"><a href="#1-ç¯å¢ƒæ­å»ºå‰æœŸå‡†å¤‡" class="headerlink" title="1. ç¯å¢ƒæ­å»ºå‰æœŸå‡†å¤‡"></a>1. ç¯å¢ƒæ­å»ºå‰æœŸå‡†å¤‡</h2><h3 id="ç»„ä»¶ç‰ˆæœ¬"><a href="#ç»„ä»¶ç‰ˆæœ¬" class="headerlink" title="ç»„ä»¶ç‰ˆæœ¬"></a>ç»„ä»¶ç‰ˆæœ¬</h3><ul><li>Kubernetes 1.11.2</li><li>Docker 18.06.0-ce</li><li>Etcd v3.3.9</li><li>Flanneld v0.10.0</li><li>TLS è®¤è¯é€šä¿¡ï¼ˆæ‰€æœ‰ç»„ä»¶ï¼Œå¦‚etcdã€kubernetes master å’Œnodeï¼‰</li><li>RBAC æˆæƒ</li><li>kubelet TLS Bootstrapping</li><li>kubedns v1.14.10ã€dashboard v1.10.0ã€heapster v1.5.4ç­‰æ’ä»¶</li></ul><h3 id="etcd-é›†ç¾¤-amp-amp-k8s-master-æœºå™¨-amp-amp-k8s-node-æœºå™¨"><a href="#etcd-é›†ç¾¤-amp-amp-k8s-master-æœºå™¨-amp-amp-k8s-node-æœºå™¨" class="headerlink" title="etcd é›†ç¾¤ &amp;&amp; k8s master æœºå™¨ &amp;&amp; k8s node æœºå™¨"></a>etcd é›†ç¾¤ &amp;&amp; k8s master æœºå™¨ &amp;&amp; k8s node æœºå™¨</h3><ul><li>master01ï¼šip1</li><li>node01: ip2</li><li>node02: ip3</li><li>node03: ip4</li></ul><h3 id="é›†ç¾¤ç¯å¢ƒå˜é‡"><a href="#é›†ç¾¤ç¯å¢ƒå˜é‡" class="headerlink" title="é›†ç¾¤ç¯å¢ƒå˜é‡"></a>é›†ç¾¤ç¯å¢ƒå˜é‡</h3><p>åç»­éƒ¨ç½²å°†ä¼šä½¿ç”¨åˆ°çš„å…¨å±€å˜é‡ï¼Œå®šä¹‰å¦‚ä¸‹ï¼ˆæ ¹æ®è‡ªå·±çš„æœºå™¨ã€ç½‘ç»œä¿®æ”¹ï¼‰ï¼š</p><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell"><span class="token comment"># TLS Bootstrapping ä½¿ç”¨çš„Tokenï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤ head -c 16 /dev/urandom | od -An -t x | tr -d ' ' ç”Ÿæˆ</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">BOOTSTRAP_TOKEN</span><span class="token operator">=</span><span class="token string">"8981b594122ebed7596f1d3b69c78223"</span><span class="token comment"># å»ºè®®ä½¿ç”¨æœªç”¨çš„ç½‘æ®µæ¥å®šä¹‰æœåŠ¡ç½‘æ®µå’ŒPod ç½‘æ®µ</span><span class="token comment"># æœåŠ¡ç½‘æ®µ(Service CIDR)ï¼Œéƒ¨ç½²å‰è·¯ç”±ä¸å¯è¾¾ï¼Œéƒ¨ç½²åé›†ç¾¤å†…éƒ¨ä½¿ç”¨IP:Portå¯è¾¾</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">SERVICE_CIDR</span><span class="token operator">=</span><span class="token string">"10.254.0.0/16"</span><span class="token comment"># Pod ç½‘æ®µ(Cluster CIDR)ï¼Œéƒ¨ç½²å‰è·¯ç”±ä¸å¯è¾¾ï¼Œéƒ¨ç½²åè·¯ç”±å¯è¾¾(flanneld ä¿è¯)</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">CLUSTER_CIDR</span><span class="token operator">=</span><span class="token string">"172.30.0.0/16"</span><span class="token comment"># æœåŠ¡ç«¯å£èŒƒå›´(NodePort Range)</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">NODE_PORT_RANGE</span><span class="token operator">=</span><span class="token string">"30000-32766"</span><span class="token comment"># etcdé›†ç¾¤æœåŠ¡åœ°å€åˆ—è¡¨</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">ETCD_ENDPOINTS</span><span class="token operator">=</span><span class="token string">"https://ip1:2379,https://ip2:2379,https://ip3:2379"</span><span class="token comment"># flanneld ç½‘ç»œé…ç½®å‰ç¼€</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">FLANNEL_ETCD_PREFIX</span><span class="token operator">=</span><span class="token string">"/kubernetes/network"</span><span class="token comment"># kubernetes æœåŠ¡IP(é¢„å…ˆåˆ†é…ï¼Œä¸€èˆ¬ä¸ºSERVICE_CIDRä¸­çš„ç¬¬ä¸€ä¸ªIP)</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">CLUSTER_KUBERNETES_SVC_IP</span><span class="token operator">=</span><span class="token string">"10.254.0.1"</span><span class="token comment"># é›†ç¾¤ DNS æœåŠ¡IP(ä»SERVICE_CIDR ä¸­é¢„å…ˆåˆ†é…)</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">CLUSTER_DNS_SVC_IP</span><span class="token operator">=</span><span class="token string">"10.254.0.2"</span><span class="token comment"># é›†ç¾¤ DNS åŸŸå</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">CLUSTER_DNS_DOMAIN</span><span class="token operator">=</span><span class="token string">"cluster.local."</span><span class="token comment"># MASTER API Server åœ°å€</span>$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">MASTER_URL</span><span class="token operator">=</span><span class="token string">"k8s-api.virtual.local"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="2-åˆ›å»ºCA-è¯ä¹¦å’Œå¯†é’¥"><a href="#2-åˆ›å»ºCA-è¯ä¹¦å’Œå¯†é’¥" class="headerlink" title="2. åˆ›å»ºCA è¯ä¹¦å’Œå¯†é’¥"></a>2. åˆ›å»ºCA è¯ä¹¦å’Œå¯†é’¥</h2><p><code>kubernetes</code> ç³»ç»Ÿå„ä¸ªç»„ä»¶éœ€è¦ä½¿ç”¨<code>TLS</code>è¯ä¹¦å¯¹é€šä¿¡è¿›è¡ŒåŠ å¯†ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>CloudFlare</code>çš„PKI å·¥å…·é›†<a href="https://pkg.cfssl.org/">cfssl</a> æ¥ç”ŸæˆCertificate Authority(CA) è¯ä¹¦å’Œå¯†é’¥æ–‡ä»¶ï¼Œ CA æ˜¯è‡ªç­¾åçš„è¯ä¹¦ï¼Œç”¨æ¥ç­¾ååç»­åˆ›å»ºçš„å…¶ä»–TLS è¯ä¹¦ã€‚</p><h3 id="å®‰è£…-CFSSL"><a href="#å®‰è£…-CFSSL" class="headerlink" title="å®‰è£… CFSSL"></a>å®‰è£… CFSSL</h3><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">$ <span class="token function">wget</span> https://pkg.cfssl.org/R1.2/cfssl_linux-amd64$ <span class="token function">chmod</span> +x cfssl_linux-amd64$ <span class="token function">sudo</span> <span class="token function">mv</span> cfssl_linux-amd64 /usr/k8s/bin/cfssl$ <span class="token function">wget</span> https://pkg.cfssl.org/R1.2/cfssljson_linux-amd64$ <span class="token function">chmod</span> +x cfssljson_linux-amd64$ <span class="token function">sudo</span> <span class="token function">mv</span> cfssljson_linux-amd64 /usr/k8s/bin/cfssljson$ <span class="token function">wget</span> https://pkg.cfssl.org/R1.2/cfssl-certinfo_linux-amd64$ <span class="token function">chmod</span> +x cfssl-certinfo_linux-amd64$ <span class="token function">sudo</span> <span class="token function">mv</span> cfssl-certinfo_linux-amd64 /usr/k8s/bin/cfssl-certinfo$ <span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span>/usr/k8s/bin:<span class="token environment constant">$PATH</span>$ <span class="token function">mkdir</span> ssl <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> ssl$ cfssl print-defaults config <span class="token operator">&gt;</span> config.json$ cfssl print-defaults csr <span class="token operator">&gt;</span> csr.json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>å€Ÿé‰´äº<a href="https://blog.qikqiak.com/post/manual-install-high-available-kubernetes-cluster">https://blog.qikqiak.com/post/manual-install-high-available-kubernetes-cluster</a></p>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> kubernetes </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>MySQLå…å®‰è£…ç‰ˆéƒ¨ç½²</title>
      <link href="//2021/06/22/mysql-install-windows/"/>
      <url>//2021/06/22/mysql-install-windows/</url>
      
        <content type="html"><![CDATA[<h2 id="MySQLå…å®‰è£…ç‰ˆéƒ¨ç½²ï¼ˆWindowsï¼‰"><a href="#MySQLå…å®‰è£…ç‰ˆéƒ¨ç½²ï¼ˆWindowsï¼‰" class="headerlink" title="MySQLå…å®‰è£…ç‰ˆéƒ¨ç½²ï¼ˆWindowsï¼‰"></a>MySQLå…å®‰è£…ç‰ˆéƒ¨ç½²ï¼ˆWindowsï¼‰</h2><h3 id="ä¸‹è½½åœ°å€"><a href="#ä¸‹è½½åœ°å€" class="headerlink" title="ä¸‹è½½åœ°å€"></a>ä¸‹è½½åœ°å€</h3><p><a href="https://downloads.mysql.com/archives/community/">MySQLä¸‹è½½åœ°å€</a></p><h3 id="å®‰è£…æ­¥éª¤"><a href="#å®‰è£…æ­¥éª¤" class="headerlink" title="å®‰è£…æ­¥éª¤"></a>å®‰è£…æ­¥éª¤</h3><ul><li><p>è§£å‹å‹ç¼©åŒ…ï¼Œå¹¶æ–°å»ºmy.iniæ–‡ä»¶ä»¥ä»£æ›¿my-default.iniæ–‡ä»¶</p></li><li><p>my.iniæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre class="line-numbers language-ini" data-language="ini"><code class="language-ini"><span class="token selector">[mysql]</span><span class="token comment">#è®¾ç½®mysqlå®¢æˆ·ç«¯é»˜è®¤å­—ç¬¦é›†</span><span class="token constant">default-character-set</span><span class="token attr-value"><span class="token punctuation">=</span>utf8</span><span class="token selector">[mysqld]</span><span class="token comment">#è®¾ç½®3306ç«¯å£</span><span class="token constant">port</span> <span class="token attr-value"><span class="token punctuation">=</span> 3306 </span><span class="token comment">#è®¾ç½®mysqlçš„å®‰è£…ç›®å½•</span><span class="token constant">basedir</span><span class="token attr-value"><span class="token punctuation">=</span>D:\\Program Files\\Mysql</span><span class="token comment">#è®¾ç½®mysqlæ•°æ®åº“çš„æ•°æ®çš„å­˜æ”¾ç›®å½•</span><span class="token constant">datadir</span><span class="token attr-value"><span class="token punctuation">=</span>D:\\Program Files\\Mysql\\data</span><span class="token comment">#å…è®¸æœ€å¤§è¿æ¥æ•°</span><span class="token constant">max_connections</span><span class="token attr-value"><span class="token punctuation">=</span>200</span><span class="token comment">#æœåŠ¡ç«¯ä½¿ç”¨çš„å­—ç¬¦é›†é»˜è®¤ä¸º8æ¯”ç‰¹ç¼–ç çš„latin1å­—ç¬¦é›†</span><span class="token constant">character-set-server</span><span class="token attr-value"><span class="token punctuation">=</span>utf8</span><span class="token comment">#åˆ›å»ºæ–°è¡¨æ—¶å°†ä½¿ç”¨çš„é»˜è®¤å­˜å‚¨å¼•æ“</span><span class="token constant">default-storage-engine</span><span class="token attr-value"><span class="token punctuation">=</span>INNODB</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€cmdå‘½ä»¤çª—å£ï¼Œè¿›å…¥åˆ°mysqlå®‰è£…ç›®å½•ä¸­ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p></li></ul><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># åˆå§‹åŒ–,æ­¤æ—¶mysqlå®‰è£…ç›®å½•ä¸‹å·²ç»è‡ªåŠ¨åˆ›å»ºäº†dataæ–‡ä»¶å¤¹ã€‚</span>mysqld --initialize-insecure --user<span class="token operator">=</span>mysql<span class="token comment"># å®‰è£…mysqlæœåŠ¡ï¼Œæ­¤å¤„æ³¨æ„ï¼šæ˜¯mysqldä¸æ˜¯mysql</span>mysqld <span class="token function">install</span><span class="token comment"># å¯åŠ¨mysqlæœåŠ¡</span>net start mysql<span class="token comment"># ç™»å½•è¿æ¥mysqlå®¢æˆ·ç«¯</span>mysql -u root -p<span class="token comment"># è¿›å…¥mysqlæ§åˆ¶å°,ä¿®æ”¹rootç”¨æˆ·å¯†ç </span>alter user <span class="token string">'root'</span>@<span class="token string">'localhost'</span> identified by <span class="token string">'æ–°å¯†ç '</span><span class="token comment"># -------å…¶å®ƒå‘½ä»¤ï¼Œæ­¤å¤„ä¸æ‰§è¡Œ---------</span><span class="token comment"># åœæ­¢mysqlæœåŠ¡</span>net stop mysql<span class="token comment"># åˆ é™¤å·²å®‰è£…çš„mysqlæœåŠ¡</span>mysqld remove<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> è¿ç»´ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> database </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="//2021/01/01/hello-world/"/>
      <url>//2021/01/01/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo new <span class="token string">"My New Post"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo server<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo generate<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ hexo deploy<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      <categories>
          
          <category> æµ‹è¯• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> test </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>javaæ‹·è´æŠ€æœ¯æ¢ç©¶</title>
      <link href="//2014/06/26/java-clone/"/>
      <url>//2014/06/26/java-clone/</url>
      
        <content type="html"><![CDATA[<h4 id="æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«"><a href="#æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«" class="headerlink" title="æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«"></a>æµ…æ‹·è´å’Œæ·±æ‹·è´çš„åŒºåˆ«</h4><blockquote><p>æµ…æ‹·è´ï¼š å¯¹å½“å‰å¯¹è±¡è¿›è¡Œå…‹éš†ï¼Œå¹¶å…‹éš†è¯¥å¯¹è±¡æ‰€åŒ…å«çš„8ç§åŸºæœ¬æ•°æ®ç±»å‹å’ŒStringç±»å‹çš„å±æ€§ï¼ˆå¯¹å½“å‰å¯¹è±¡æ‹·è´ä¸€ä»½å¹¶é‡æ–°åˆ†é…å†…å­˜ï¼Œå³äº§ç”Ÿäº†æ–°çš„å¯¹è±¡ï¼‰ã€‚ä½†å¦‚æœè¢«å…‹éš†çš„å¯¹è±¡ä¸­åŒ…å«é™¤äº†8ç§æ•°æ®ç±»å‹å’ŒStringç±»å‹å¤–çš„å…¶ä»–ç±»å‹çš„å±æ€§ï¼Œæµ…æ‹·è´å¹¶ä¸ä¼šå…‹éš†è¿™äº›å±æ€§ï¼ˆå³ä¸ä¼šä¸ºè¿™äº›å±æ€§åˆ†é…å†…å­˜ï¼Œè€Œæ˜¯å¼•ç”¨åŸæ¥å¯¹è±¡ä¸­çš„å±æ€§ï¼‰</p><p>æ·±æ‹·è´ï¼š æ·±æ‹·è´æ˜¯åœ¨æµ…æ‹·è´çš„åŸºç¡€ä¸Šï¼Œé€’å½’åœ°å…‹éš†é™¤äº†8ç§åŸºæœ¬ç±»å‹å’ŒStringç±»å‹ä¹‹å¤–çš„å±æ€§ï¼ˆå³ä¸ºè¿™äº›å±æ€§é‡æ–°åˆ†é…å†…å­˜è€Œéå¼•ç”¨åŸæ¥å¯¹è±¡ä¸­çš„å±æ€§ï¼‰</p></blockquote><h4 id="æµ…æ‹·è´ï¼ˆShallow-Cloneï¼‰"><a href="#æµ…æ‹·è´ï¼ˆShallow-Cloneï¼‰" class="headerlink" title="æµ…æ‹·è´ï¼ˆShallow Cloneï¼‰"></a>æµ…æ‹·è´ï¼ˆShallow Cloneï¼‰</h4><h5 id="æ„å»ºå®ä½“ç±»"><a href="#æ„å»ºå®ä½“ç±»" class="headerlink" title="æ„å»ºå®ä½“ç±»"></a>æ„å»ºå®ä½“ç±»</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>nicholas<span class="token punctuation">.</span>example<span class="token punctuation">.</span>model</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Getter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Setter</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">ToString</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">Serializable</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Iterator</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token comment">/** * @author Nicholas */</span><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@Setter</span><span class="token annotation punctuation">@ToString</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ç¼–å·     */</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token comment">/**     * åç§°     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">/**     * å±æ€§ä¿¡æ¯     */</span>    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> props<span class="token punctuation">;</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="æµ…æ‹·è´æµ‹è¯•"><a href="#æµ…æ‹·è´æµ‹è¯•" class="headerlink" title="æµ…æ‹·è´æµ‹è¯•"></a>æµ…æ‹·è´æµ‹è¯•</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>nicholas<span class="token punctuation">.</span>example<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CloningTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>        <span class="token class-name">User</span> origin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        origin<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        origin<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"Nicholas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">,</span><span class="token string">"NanJing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        origin<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">User</span> cloneUser <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> origin<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ£€æŸ¥userå’ŒcloneUserçš„å±æ€§æ˜¯å¦ä¸€è‡´</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user: "</span> <span class="token operator">+</span> origin<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cloneUser: "</span> <span class="token operator">+</span> cloneUser<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user and cloneUser === test: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>origin <span class="token operator">==</span> cloneUser<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ£€æŸ¥userå’ŒcloneUserçš„propsæ˜¯å¦ä¸€è‡´</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user props: "</span> <span class="token operator">+</span> origin<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cloneUser props: "</span> <span class="token operator">+</span> cloneUser<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user and cloneUser props === test: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>origin<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> cloneUser<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®©æˆ‘ä»¬çœ‹çœ‹å¯¹é»˜è®¤å…‹éš†çš„å½±å“</span>        <span class="token comment">// ä¿®æ”¹userå¯¹è±¡çš„props</span>        origin<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span><span class="token string">"CTO"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        origin<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">,</span><span class="token string">"ChangZhou"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cloneUser props:"</span> <span class="token operator">+</span> cloneUser<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¿®æ”¹userçš„name</span>        origin<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"SunChunYang"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cloneUser name:"</span> <span class="token operator">+</span> cloneUser<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="ç»“æœè¾“å‡º"><a href="#ç»“æœè¾“å‡º" class="headerlink" title="ç»“æœè¾“å‡º"></a>ç»“æœè¾“å‡º</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">D:<span class="token punctuation">\</span>Develop<span class="token punctuation">\</span>env<span class="token punctuation">\</span>java<span class="token punctuation">\</span>jdk-11.0.2<span class="token punctuation">\</span>bin<span class="token punctuation">\</span>java.exe <span class="token punctuation">..</span>.com.example.demo.model.CloningTestuser: User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>Nicholas, <span class="token assign-left variable">props</span><span class="token operator">=</span><span class="token punctuation">{</span>salary<span class="token operator">=</span><span class="token number">10000</span>, <span class="token assign-left variable">city</span><span class="token operator">=</span>NanJing<span class="token punctuation">}</span><span class="token punctuation">)</span>cloneUser: User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>Nicholas, <span class="token assign-left variable">props</span><span class="token operator">=</span><span class="token punctuation">{</span>salary<span class="token operator">=</span><span class="token number">10000</span>, <span class="token assign-left variable">city</span><span class="token operator">=</span>NanJing<span class="token punctuation">}</span><span class="token punctuation">)</span>user and cloneUser <span class="token operator">==</span><span class="token operator">=</span> test: <span class="token boolean">false</span>user props: <span class="token punctuation">{</span>salary<span class="token operator">=</span><span class="token number">10000</span>, <span class="token assign-left variable">city</span><span class="token operator">=</span>NanJing<span class="token punctuation">}</span>cloneUser props: <span class="token punctuation">{</span>salary<span class="token operator">=</span><span class="token number">10000</span>, <span class="token assign-left variable">city</span><span class="token operator">=</span>NanJing<span class="token punctuation">}</span>user and cloneUser props <span class="token operator">==</span><span class="token operator">=</span> test: <span class="token boolean">true</span>cloneUser props:<span class="token punctuation">{</span>salary<span class="token operator">=</span><span class="token number">10000</span>, <span class="token assign-left variable">title</span><span class="token operator">=</span>CTO, <span class="token assign-left variable">city</span><span class="token operator">=</span>ChangZhou<span class="token punctuation">}</span>cloneUser name:NicholasProcess finished with <span class="token builtin class-name">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="æ·±æ‹·è´ï¼ˆDeep-Cloneï¼‰"><a href="#æ·±æ‹·è´ï¼ˆDeep-Cloneï¼‰" class="headerlink" title="æ·±æ‹·è´ï¼ˆDeep Cloneï¼‰"></a>æ·±æ‹·è´ï¼ˆDeep Cloneï¼‰</h4><h5 id="æ„å»ºå®ä½“ç±»-1"><a href="#æ„å»ºå®ä½“ç±»-1" class="headerlink" title="æ„å»ºå®ä½“ç±»"></a>æ„å»ºå®ä½“ç±»</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token comment">/** * @author Nicholas */</span><span class="token annotation punctuation">@Getter</span><span class="token annotation punctuation">@Setter</span><span class="token annotation punctuation">@ToString</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Cloneable</span><span class="token punctuation">,</span> <span class="token class-name">Serializable</span> <span class="token punctuation">{</span>    <span class="token comment">/**     * ç¼–å·     */</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> id<span class="token punctuation">;</span>    <span class="token comment">/**     * åç§°     */</span>    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>    <span class="token comment">/**     * å±æ€§ä¿¡æ¯     */</span>    <span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> props<span class="token punctuation">;</span>    <span class="token comment">/**     * æ–¹æ³•ä¸€ï¼šæœ€åŸå§‹çš„å®ç°æ–¹å¼ï¼Œç»è¿‡æ„é€ æ–¹æ³•æ‰‹å»ºç«‹     * ä¼˜åŠ¿ï¼š     * 1.å®ç°ç®€å•ç›´è§‚     * 2.ä¸é¡»è¦ä¾èµ–é¢å¤–çš„æ¥å£å’Œç¬¬ä¸‰æ–¹åŒ…     * ç¼ºç‚¹ï¼š     * 1.æˆå‘˜å˜é‡å‘ç”Ÿå˜æ›´é¡»è¦ä¿®æ”¹æ–¹æ³•ï¼Œä¸çŸ¥è¶³å¼€é—­åŸåˆ™ï¼›     * 2.ä¸å…·å¤‡å¯å¤ç”¨æ€§ï¼›     */</span>    <span class="token annotation punctuation">@Override</span>    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token class-name">User</span> copyUser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        copyUser<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        copyUser<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> hm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> key<span class="token punctuation">;</span>            <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Deep Copy of field by field</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                key <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                hm<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            copyUser<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span>hm<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> copyUser<span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token comment">/**     * æ–¹æ³•äºŒï¼šä½¿ç”¨Objectçš„cloneæ–¹æ³•å®ç°     * ä¼˜åŠ¿ï¼š     * 1.è¾ƒæ–¹å¼1å®ç°æ›´ç®€å•ï¼Œä¸é¡»è¦å…³æ³¨copyç»†èŠ‚ï¼›     * 2.ä¸é¡»è¦ä¾èµ–ç¬¬ä¸‰æ–¹åŒ…ï¼›     * 3.ä¸ä¿®æ”¹å¼•ç”¨ç±»å‹æˆå‘˜å˜é‡ä¸é¡»è¦ä¿®æ”¹ä»£ç      * ç¼ºç‚¹ï¼š     * 1.é¡»è¦å®ç°Cloneableï¼Œé‡å†™çˆ¶ç±»cloneæ–¹æ³•ï¼Œä¸çŸ¥è¶³é‡Œå¼æ›¿æ¢ï¼›     * 2.ä¸”å¼•ç”¨ç±»å‹æˆå‘˜å˜é‡å‘ç”Ÿå˜æ›´é¡»è¦ä¿®æ”¹æ–¹æ³•ï¼Œä¸çŸ¥è¶³å¼€é—­åŸåˆ™ï¼›     * 3.ä¸å…·å¤‡å¯å¤ç”¨æ€§ï¼›     */</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>        <span class="token class-name">User</span> cloneUser <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> hm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token class-name">String</span> key<span class="token punctuation">;</span>            <span class="token class-name">Iterator</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> it <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Deep Copy of field by field</span>            <span class="token keyword">while</span> <span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                key <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                hm<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            cloneUser<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span>hm<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> cloneUser<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * æ–¹æ³•ä¸‰ï¼šä½¿ç”¨Javaè‡ªå¸¦çš„æµæ–¹å¼å®ç°     * ä¼˜åŠ¿ï¼š     * 1.ä¸ç ´åç±»çš„å°è£…ï¼Œæ— éœ€äº†è§£è¢«copyå¯¹è±¡çš„å†…éƒ¨     * 2.ä¸é¡»è¦ä¾èµ–ç¬¬ä¸‰æ–¹åŒ…     * 3.ä»£ç å¯å¤ç”¨     * ç¼ºç‚¹ï¼š     * 1.é¡»è¦å®ç°Serializableæ¥å£ï¼Œä¼šæœ‰é¢å¤–çš„å¼€é”€     */</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ClassNotFoundException</span> <span class="token punctuation">{</span>        <span class="token class-name">ByteArrayOutputStream</span> bos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayOutputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ObjectOutputStream</span> oos <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectOutputStream</span><span class="token punctuation">(</span>bos<span class="token punctuation">)</span><span class="token punctuation">;</span>        oos<span class="token punctuation">.</span><span class="token function">writeObject</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ByteArrayInputStream</span> bis <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ByteArrayInputStream</span><span class="token punctuation">(</span>bos<span class="token punctuation">.</span><span class="token function">toByteArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">ObjectInputStream</span> ois <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectInputStream</span><span class="token punctuation">(</span>bis<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span>ois<span class="token punctuation">.</span><span class="token function">readObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token comment">/**     * æ–¹æ³•å››ï¼šä½¿ç”¨ç¬¬ä¸‰æ–¹åŒ…Jacksonå®ç°     * ä¼˜åŠ¿ï¼š     * 1.ä¸ç ´åç±»çš„å°è£…ï¼Œæ— éœ€äº†è§£è¢«copyå¯¹è±¡çš„å†…éƒ¨     * 2.ä¸é¡»è¦å®ç°æ¥å£     * 3.ä»£ç å¯å¤ç”¨     * ç¼ºç‚¹ï¼š     * 1.é¡»è¦ä¾èµ–ç¬¬ä¸‰æ–¹åŒ…     * 2.å†…éƒ¨å®ç°å¤æ‚     */</span>    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">JsonProcessingException</span> <span class="token punctuation">{</span>        <span class="token class-name">ObjectMapper</span> objectMapper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> objectMapper<span class="token punctuation">.</span><span class="token function">readValue</span><span class="token punctuation">(</span>objectMapper<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="æ·±æ‹·è´æµ‹è¯•"><a href="#æ·±æ‹·è´æµ‹è¯•" class="headerlink" title="æ·±æ‹·è´æµ‹è¯•"></a>æ·±æ‹·è´æµ‹è¯•</h5><pre class="line-numbers language-java" data-language="java"><code class="language-java"><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>nicholas<span class="token punctuation">.</span>example<span class="token punctuation">.</span>test</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">HashMap</span><span class="token punctuation">;</span><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Map</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CloningTest</span> <span class="token punctuation">{</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">CloneNotSupportedException</span> <span class="token punctuation">{</span>        <span class="token class-name">User</span> origin <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        origin<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        origin<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"Nicholas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> props <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"salary"</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        props<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">,</span><span class="token string">"NanJing"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        origin<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">User</span> cloneUser <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">)</span> origin<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ£€æŸ¥userå’ŒcloneUserçš„å±æ€§æ˜¯å¦ä¸€è‡´</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user: "</span> <span class="token operator">+</span> origin<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cloneUser: "</span> <span class="token operator">+</span> cloneUser<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user and cloneUser === test: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>origin <span class="token operator">==</span> cloneUser<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// æ£€æŸ¥userå’ŒcloneUserçš„propsæ˜¯å¦ä¸€è‡´</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user props: "</span> <span class="token operator">+</span> origin<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cloneUser props: "</span> <span class="token operator">+</span> cloneUser<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"user and cloneUser props === test: "</span> <span class="token operator">+</span> <span class="token punctuation">(</span>origin<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> cloneUser<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// è®©æˆ‘ä»¬çœ‹çœ‹å¯¹é»˜è®¤å…‹éš†çš„å½±å“</span>        <span class="token comment">// ä¿®æ”¹userå¯¹è±¡çš„props</span>        origin<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"title"</span><span class="token punctuation">,</span><span class="token string">"CTO"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        origin<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">"city"</span><span class="token punctuation">,</span><span class="token string">"ChangZhou"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cloneUser props:"</span> <span class="token operator">+</span> cloneUser<span class="token punctuation">.</span><span class="token function">getProps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ä¿®æ”¹userçš„name</span>        origin<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">"SunChunYang"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"cloneUser name:"</span> <span class="token operator">+</span> cloneUser<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="ç»“æœè¾“å‡º-1"><a href="#ç»“æœè¾“å‡º-1" class="headerlink" title="ç»“æœè¾“å‡º"></a>ç»“æœè¾“å‡º</h5><pre class="line-numbers language-shell" data-language="shell"><code class="language-shell">D:<span class="token punctuation">\</span>Develop<span class="token punctuation">\</span>env<span class="token punctuation">\</span>java<span class="token punctuation">\</span>jdk-11.0.2<span class="token punctuation">\</span>bin<span class="token punctuation">\</span>java.exe <span class="token punctuation">..</span>.user: User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>Nicholas, <span class="token assign-left variable">props</span><span class="token operator">=</span><span class="token punctuation">{</span>salary<span class="token operator">=</span><span class="token number">10000</span>, <span class="token assign-left variable">city</span><span class="token operator">=</span>NanJing<span class="token punctuation">}</span><span class="token punctuation">)</span>cloneUser: User<span class="token punctuation">(</span>id<span class="token operator">=</span><span class="token number">1</span>, <span class="token assign-left variable">name</span><span class="token operator">=</span>Nicholas, <span class="token assign-left variable">props</span><span class="token operator">=</span><span class="token punctuation">{</span>city<span class="token operator">=</span>NanJing, <span class="token assign-left variable">salary</span><span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">}</span><span class="token punctuation">)</span>user and cloneUser <span class="token operator">==</span><span class="token operator">=</span> test: <span class="token boolean">false</span>user props: <span class="token punctuation">{</span>salary<span class="token operator">=</span><span class="token number">10000</span>, <span class="token assign-left variable">city</span><span class="token operator">=</span>NanJing<span class="token punctuation">}</span>cloneUser props: <span class="token punctuation">{</span>city<span class="token operator">=</span>NanJing, <span class="token assign-left variable">salary</span><span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">}</span>user and cloneUser props <span class="token operator">==</span><span class="token operator">=</span> test: <span class="token boolean">false</span>cloneUser props:<span class="token punctuation">{</span>city<span class="token operator">=</span>NanJing, <span class="token assign-left variable">salary</span><span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">}</span>cloneUser name:NicholasProcess finished with <span class="token builtin class-name">exit</span> code <span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> JAVAåŸºç¡€ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
